<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torneio Dead by Daylight - Ao Vivo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cor-principal: #ff4d4d;
            --cor-fundo-container: rgba(15, 15, 15, 0.9);
            --cor-borda: #4a0e0e;
            --cor-borda-forte: #8B0000;
            --cor-texto: #f0f0f0;
            --cor-cinza-botao: #3a3a3a;
        }
        body {
            margin: 0; padding: 0; font-family: 'Roboto', sans-serif;
            color: var(--cor-texto);
            background-image: url('https://i.imgur.com/CoXOMZh.jpeg');
            background-size: cover; background-position: center; background-attachment: fixed;
            backdrop-filter: blur(4px) brightness(0.6);
        }
        header {
            background-color: rgba(10, 10, 10, 0.8); border-bottom: 2px solid var(--cor-borda);
            padding: 15px 5%; position: sticky; top: 0; z-index: 100;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px);
        }
        .logo h1 { font-family: 'Creepster', cursive; font-size: 2.5rem; color: var(--cor-principal); margin: 0; }
        .nav-buttons { display: flex; gap: 15px; }
        .nav-buttons .btn {
            font-weight: bold; text-decoration: none; color: var(--cor-texto);
            background-color: var(--cor-borda-forte); padding: 10px 20px;
            border-radius: 5px; transition: all 0.3s ease; text-transform: uppercase;
            border: none; font-size: 0.9rem; cursor: pointer;
        }
        .nav-buttons .btn:hover { background-color: var(--cor-principal); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4); }

        main { padding: 40px 5%; max-width: 1400px; margin: 0 auto; }
        .section-container {
            background-color: var(--cor-fundo-container); padding: 30px; border-radius: 10px;
            border: 2px solid var(--cor-borda); box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
            margin-bottom: 40px; animation: fadeIn 1s ease-in-out;
            position: relative; 
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .section-title { font-family: 'Creepster', cursive; font-size: 3rem; color: var(--cor-principal); text-align: center; margin-top: 0; margin-bottom: 30px; }
        
        #live-section { max-width: 960px; margin: 0 auto; }
        .video-container {
            position: relative; width: 100%; padding-top: 56.25%; 
            background-color: #000; border-radius: 5px; border: 1px solid var(--cor-borda);
        }
        .video-container > div, .video-container > iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        #player-wrapper iframe { width: 100%; height: 100%; border: none; }
        #offline-image { width: 100%; height: 100%; object-fit: cover; }
        .live-indicator {
            position: absolute; top: 15px; left: 15px; background-color: var(--cor-principal);
            color: white; padding: 5px 10px; border-radius: 5px; font-weight: bold; z-index: 20;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 50% { box-shadow: 0 0 20px rgba(255, 77, 77, 1); } }
        .hidden { display: none !important; }

        #regras ul { list-style: none; padding: 0; }
        #regras li { background-color: rgba(0, 0, 0, 0.2); padding: 15px 20px; margin-bottom: 10px; border-left: 4px solid var(--cor-borda-forte); }
        #regras li::before { content: "☠️"; margin-right: 15px; }

        #dbd-unmute-popup {
            position: absolute; bottom: 30px; left: 50%;
            transform: translateX(-50%) translateY(200%); 
            background-color: var(--cor-fundo-container); padding: 20px;
            border-radius: 10px; border: 1px solid var(--cor-borda-forte);
            box-shadow: 0 0 25px rgba(0,0,0,0.7); z-index: 2000;
            text-align: center; transition: transform 0.4s ease-out, opacity 0.4s ease-out;
            width: auto; max-width: 90%; opacity: 0; pointer-events: none;
        }
        #dbd-unmute-popup.show { transform: translateX(-50%) translateY(0); opacity: 1; pointer-events: auto; }
        #dbd-unmute-popup p { margin: 0 0 15px 0; font-size: 1.1rem; color: var(--cor-texto); }
        .popup-buttons { display: flex; gap: 10px; justify-content: center; }
        .popup-btn {
            border: none; padding: 10px 25px; border-radius: 5px;
            font-weight: bold; font-size: 1rem; cursor: pointer; transition: all 0.2s ease;
        }
        .popup-btn:hover { transform: translateY(-2px); }
        #unmute-yes-btn { background-color: var(--cor-borda-forte); color: white; }
        #unmute-yes-btn:hover { background-color: var(--cor-principal); }
        #unmute-no-btn { background-color: var(--cor-cinza-botao); color: var(--cor-texto); }
        #unmute-no-btn:hover { background-color: #555; }
        
        .popup-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85); z-index: 3000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
            transition: opacity 0.4s ease; backdrop-filter: blur(5px);
        }
        .popup-overlay.active { opacity: 1; pointer-events: auto; }
        .feedback-popup {
            background-color: #110e0e; border: 1px solid var(--cor-borda);
            box-shadow: 0 0 40px rgba(0,0,0,0.8); border-radius: 10px; padding: 30px 40px;
            width: 90%; max-width: 500px; position: relative;
            transform: scale(0.9); transition: transform 0.4s ease;
        }
        .popup-overlay.active .feedback-popup { transform: scale(1); }
        .feedback-popup .close-btn {
            position: absolute; top: 15px; right: 20px;
            background: none; border: none; font-size: 2rem;
            color: #888; cursor: pointer; transition: color 0.3s;
        }
        .feedback-popup .close-btn:hover { color: var(--cor-principal); }
        .feedback-popup h2 { font-family: 'Creepster', cursive; color: var(--cor-principal); font-size: 2.8rem; text-align: center; margin: 0 0 25px 0; }
        .feedback-popup .form-row { display: flex; gap: 20px; margin-bottom: 20px; }
        .feedback-popup .form-group { flex: 1; margin-bottom: 20px; }
        .feedback-popup .form-row .form-group { margin-bottom: 0; }
        @media (max-width: 520px) {
            .feedback-popup .form-row { flex-direction: column; gap: 0; }
            .feedback-popup .form-row .form-group { margin-bottom: 20px; }
        }
        .feedback-popup .form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #ccc; font-size: 0.8rem; text-transform: uppercase; }
        .feedback-popup .form-group input, .feedback-popup .form-group textarea {
            width: 100%; padding: 12px; background-color: rgba(0, 0, 0, 0.4); border: 1px solid #555;
            border-radius: 5px; color: #fff; font-size: 1rem;
            box-sizing: border-box; font-family: 'Roboto', sans-serif;
        }
        .feedback-popup .form-group textarea { resize: vertical; min-height: 120px; }
        .submit-feedback {
            width: 100%; border: none; background-color: var(--cor-borda-forte);
            color: white; padding: 15px; border-radius: 5px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            transition: all 0.3s; margin-top: 10px;
        }
        .submit-feedback:hover { background-color: var(--cor-principal); }
        .feedback-success { text-align: center; padding: 40px 20px; }
        .feedback-success .icon { font-size: 4rem; color: var(--cor-principal); animation: popIn 0.5s ease; }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } }
        .feedback-success h3 { font-family: 'Creepster', cursive; font-size: 2.5rem; margin: 15px 0 10px 0; }
        
        /* --- ESTILOS DO PLACAR E BOTÃO REPOSICIONADO --- */
        .scoreboard-fab {
            position: absolute; /* Posição relativa ao .section-container */
            bottom: 20px;
            right: 20px;
            background-color: var(--cor-borda-forte);
            border-radius: 30px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
            color: var(--cor-texto);
            font-weight: bold;
            font-size: 1rem;
        }
        .scoreboard-fab:hover { background-color: var(--cor-principal); transform: scale(1.05); }
        .scoreboard-fab img { width: 50px; height: 50px; }

        .scoreboard-popup {
            background-color: #110e0e; border: 1px solid var(--cor-borda);
            box-shadow: 0 0 40px rgba(0,0,0,0.8); border-radius: 10px; padding: 30px 40px;
            width: 90%; max-width: 800px; position: relative;
            transform: scale(0.9); transition: transform 0.4s ease;
        }
        .popup-overlay.active .scoreboard-popup { transform: scale(1); }
        .scoreboard-popup .close-btn {
            position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 2rem;
            color: #888; cursor: pointer; transition: color 0.3s;
        }
        .scoreboard-popup .close-btn:hover { color: var(--cor-principal); }
        .scoreboard-popup h2 { font-family: 'Creepster', cursive; color: var(--cor-principal); font-size: 2.8rem; text-align: center; margin: 0 0 25px 0; }
        .score-display { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .score-card { background-color: rgba(0,0,0,0.4); padding: 20px; border-radius: 5px; }
        .score-card h3 {
            margin: 0 0 15px 0; font-size: 1.2rem; text-transform: uppercase;
            display: flex; align-items: center; justify-content: center;
            gap: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--cor-borda);
        }
        .score-card h3 img { height: 60px; }
        .leaderboard-list { list-style: none; padding: 0; margin: 0; min-height: 288px; }
        .leaderboard-list li { display: flex; justify-content: space-between; padding: 8px 5px; border-radius: 3px; font-size: 1.1rem; }
        .leaderboard-list li:nth-child(odd) { background-color: rgba(255,255,255,0.05); }
        .leaderboard-list .name { font-weight: bold; }
        .leaderboard-list .score { color: var(--cor-principal); font-weight: bold; }
        @media (max-width: 768px) { .score-display { grid-template-columns: 1fr; } }
        /* --- INÍCIO: ESTILOS DA CONTAGEM REGRESSIVA --- */
#countdown-container {
    flex-grow: 1;
    text-align: center;
    padding: 0 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-width: 300px; /* Largura mínima para evitar quebra */
}
.countdown-title {
    margin: 0 0 5px 0;
    font-size: 1rem;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #ccc;
}
#timer {
    display: flex;
    justify-content: center;
    gap: 15px;
}
.time-block {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.time-value {
    font-family: 'Creepster', cursive;
    font-size: 2.5rem;
    color: var(--cor-principal);
    line-height: 1;
    animation: pulse-red-text 2s infinite;
}
.time-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    color: #aaa;
}
#live-message {
    font-family: 'Creepster', cursive;
    font-size: 2rem;
    color: var(--cor-principal);
    animation: pulse-red-text 1.5s infinite;
}
@keyframes pulse-red-text {
    50% { text-shadow: 0 0 15px var(--cor-principal); }
}
@media (max-width: 900px) {
    #countdown-container { display: none; } /* Esconde em telas pequenas para não quebrar o layout */
}
/* --- FIM DOS ESTILOS --- */
        /* --- INÍCIO: ESTILOS DO CONTADOR DE VISITANTES --- */
#visitor-counter {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #aaa;
    margin-top: 65px; /* Alinha com o logo */
    font-size: 0.9rem;
    text-shadow: 0 0 5px black;
    transform: translateX(-185px);
}
#visitor-counter .icon {
    font-size: 1.2rem;
    animation: pulse-red-text 3s infinite; /* Usa a animação cintilante */
}
#visitor-counter #visitor-count {
    font-weight: bold;
    color: var(--cor-principal);
    font-size: 1.1rem;
}
/* Esconde em telas pequenas para não quebrar o layout */
@media (max-width: 768px) {
    #visitor-counter {
        display: none;
    }
}
/* --- FIM DOS ESTILOS --- */
        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        /* --- INÍCIO: ESTILOS DO CHAT AO VIVO --- */
#chat-messages {
    height: 350px;
    overflow-y: auto;
    border: 1px solid #333;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 15px;
    display: flex;
    flex-direction: column;

    /* --- ADIÇÕES PARA O FUNDO TEMÁTICO --- */
    background-image: 
        /* Camada de cor preta semi-transparente por cima */
        linear-gradient(rgba(15, 15, 15, 0.85), rgba(15, 15, 15, 0.85)),
        /* Sua imagem da Entidade por baixo */
        url('https://i.imgur.com/ElV8c5i.png');
    
    background-position: center; /* Centraliza a imagem */
    background-repeat: no-repeat; /* A imagem não se repete */
    background-size: contain; /* Garante que a imagem caiba inteira na caixa */
}
#chat-messages::-webkit-scrollbar { width: 8px; }
#chat-messages::-webkit-scrollbar-track { background: #1a1a1a; }
#chat-messages::-webkit-scrollbar-thumb { background: var(--cor-borda-forte); border-radius: 4px; }
.chat-message { margin-bottom: 12px; line-height: 1.4; word-wrap: break-word; }
.chat-message .name { 
    font-weight: bold; 
    /* color: var(--cor-principal); -- REMOVIDO DAQUI */
    margin-right: 8px; 
}

/* NOVO: Estilo para menções no chat */
.chat-message .mention {
    background-color: var(--cor-principal);
    color: white;
    padding: 2px 5px;
    border-radius: 4px;
    font-weight: bold;
}

#chat-form .form-group {
    display: flex;
    gap: 15px;
}
#chat-form input {
    flex-grow: 1;
    padding: 12px;
    border-radius: 5px;
    border: 1px solid #555;
    background-color: #1a1a1a;
    color: #f0f0f0;
    font-size: 1rem;
    box-sizing: border-box;
}
#chat-form button {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    background-color: var(--cor-borda-forte);
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 1rem;
}
#chat-form button:hover { background-color: var(--cor-principal); }
        #message-group {
    position: relative;
}

/* NOVO: Estilos para a caixa de sugestões de menção */
.suggestions-box {
    position: absolute;
    bottom: 100%; /* Aparece acima do campo de input */
    left: 0;
    right: 0;
    background-color: #1f1f1f;
    border: 1px solid var(--cor-borda);
    border-bottom: none;
    border-radius: 5px 5px 0 0;
    max-height: 160px;
    overflow-y: auto;
    z-index: 10; /* Garante que fique sobre outros elementos */
    box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
}

.suggestion-item {
    padding: 10px 15px;
    color: var(--cor-texto);
    cursor: pointer;
    border-bottom: 1px solid #333;
    font-size: 0.9rem;
}
.suggestion-item:last-child {
    border-bottom: none;
}
.suggestion-item:hover {
    background-color: var(--cor-borda-forte);
}
/* --- FIM: ESTILOS DO CHAT AO VIVO --- */
        /* NOVO: Estilo para mensagens do sistema no chat */
.chat-system-message {
    color: #a0a0a0;
    font-style: italic;
    text-align: center;
    margin: 8px 0;
    font-size: 0.9em;
}
      /* --- INÍCIO: Estilos para troca de transmissão --- */
#stream-switcher {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px; /* Espaçamento acima dos botões */
}

.stream-btn {
    font-weight: bold;
    text-decoration: none;
    color: var(--cor-texto);
    background-color: var(--cor-cinza-botao); /* Cor padrão */
    padding: 10px 20px;
    border-radius: 5px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    border: 1px solid var(--cor-borda);
    font-size: 0.9rem;
    cursor: pointer;
}

.stream-btn:hover {
    background-color: #555;
    transform: translateY(-2px);
}

/* Estilo do botão ativo (transmissão selecionada) */
.stream-btn.active {
    background-color: var(--cor-principal);
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
    border-color: var(--cor-principal);
}
/* --- FIM: Estilos para troca de transmissão --- */
        /* --- INÍCIO: Estilos do Placar Atualizado --- */

/* ✨ NOVO: Estilo para o texto de data/hora da atualização */
#last-updated-timestamp {
    color: #4CAF50; /* Um tom de verde */
    font-size: 0.9rem;
    font-style: italic;
    text-align: center;
    margin-top: -15px; /* Puxa para mais perto do título */
    margin-bottom: 25px;
}

/* 🔧 ALTERADO: Força o placar a ter sempre uma coluna, já que agora é uma lista só */
.score-display { 
    grid-template-columns: 1fr; 
}

/* Ajusta a altura mínima para a nova lista única */
#teams-leaderboard {
    min-height: 400px;
}
/* --- FIM: Estilos do Placar Atualizado --- */
        /* ============================================= */
/* --- INÍCIO: ESTILOS DO GRIMÓRIO FLUTUANTE --- */
/* ============================================= */
.grimorio-flutuante {
    position: fixed; /* Fixa o elemento na tela */
    bottom: 1110px;    /* Distância da parte de baixo */
    left: 280px;      /* Distância da esquerda */
    z-index: 1050;   /* Garante que ele fique acima da maioria dos outros elementos */
    
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: var(--cor-texto);
    
    animation: flutuar 3s ease-in-out infinite;
    transition: transform 0.3s ease, filter 0.3s ease;
}

.grimorio-flutuante:hover {
    transform: scale(1.1);
    filter: drop-shadow(0 0 15px var(--cor-principal));
    animation-play-state: paused;
}

.grimorio-flutuante img {
    width: 80px;
    height: auto;
    margin-bottom: 5px;
}

.grimorio-flutuante span {
    font-family: 'Creepster', cursive;
    font-size: 1.2rem;
    background-color: rgba(10, 10, 10, 0.7);
    padding: 5px 10px;
    border-radius: 5px;
    text-shadow: 0 0 5px black;
}

@keyframes flutuar {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
}

@media (max-width: 768px) {
    .grimorio-flutuante {
        bottom: 15px;
        left: 15px;
    }
    .grimorio-flutuante img {
        width: 60px;
    }
    .grimorio-flutuante span {
        font-size: 1rem;
    }
}
/* --- FIM: ESTILOS DO GRIMÓRIO FLUTUANTE --- */
        footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: rgba(255, 255, 255, 0.1); /* Cor de fundo quase transparente */
    backdrop-filter: blur(15px); /* Efeito de vidro */
    border-top: 1px solid rgba(255, 255, 255, 0.2); /* Borda sutil */
    padding: 15px 5%; /* Espaçamento interno */
    z-index: 100; /* Garante que fique acima de outros elementos */
    color: #ddd; /* Cor do texto */
    font-size: 0.8rem;
             box-sizing: border-box; /* Isso resolve o problema da largura */
}

.footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1400px; /* Mantém a largura consistente com o main */
    margin: 0 auto;
}

.footer-links a, .footer-links button {
    color: #ccc;
    text-decoration: none;
    margin-left: 15px;
    transition: color 0.3s ease;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
}

.footer-links a:hover, .footer-links button:hover {
    color: var(--cor-principal);
}

.footer-links button {
    padding: 0; /* Remove padding padrão do botão */
}

/* Estilo para telas menores */
@media (max-width: 768px) {
    .footer-content {
        flex-direction: column;
        text-align: center;
    }
    .footer-links {
        margin-top: 10px;
    }
    .footer-links a, .footer-links button {
        margin: 0 10px;
    }
}
        /* SUBSTITUA TODO O CSS DO SEU RODAPÉ POR ESTE BLOCO */

footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: rgba(15, 15, 15, 0.2); /* Um pouco mais escuro para contraste */
    backdrop-filter: blur(15px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 5%; /* Diminuí um pouco a altura */
    z-index: 100;
    box-sizing: border-box;
}

.footer-content {
    display: grid; /* Mude de flex para grid */
    grid-template-columns: 1fr auto 1fr; /* Cria 3 colunas: esquerda | centro | direita */
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    gap: 20px; /* Espaçamento entre as colunas */
}

/* Esquerda: Imagem */
.footer-logo img {
    height: 40px; /* Tamanho da imagem */
    width: auto;
    vertical-align: middle; /* Alinha verticalmente com o texto */
}

/* Centro: Texto de Copyright */
.footer-copyright {
    color: #ccc;
    font-size: 0.9rem;
    margin: 0;
    text-align: center; /* Garante que o texto fique centralizado em sua coluna */
}

/* Direita: Links */
.footer-links {
    display: flex;
    gap: 20px;
    justify-self: end; /* Alinha os links à DIREITA de sua coluna */
}

.footer-links a, .footer-links button {
    color: #ccc;
    text-decoration: none;
    transition: color 0.3s ease;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0;
    font-family: 'Roboto', sans-serif; /* Garante a mesma fonte */
}

.footer-links a:hover, .footer-links button:hover {
    color: var(--cor-principal);
}

/* Media Query para telas pequenas */
@media (max-width: 850px) {
    .footer-content {
        flex-direction: column;
        gap: 10px;
    }
    .footer-copyright {
        /* Coloca o copyright no topo em telas pequenas */
        order: -1; 
    }
}
    </style>
</head>
<body>
    <header>
        <div class="logo"><h1>Torneio da Entidade</h1></div>
        <div id="visitor-counter">
    <span class="icon">👁️</span>
    <span id="visitor-count">1</span>
    <span class="text"></span>
</div>
        <div id="countdown-container">
    <p class="countdown-title">A Caçada Começa Em...</p>
    <div id="timer">
        <div class="time-block">
            <span id="days" class="time-value">00</span>
            <span class="time-label">Dias</span>
        </div>
        <div class="time-block">
            <span id="hours" class="time-value">00</span>
            <span class="time-label">Horas</span>
        </div>
        <div class="time-block">
            <span id="minutes" class="time-value">00</span>
            <span class="time-label">Minutos</span>
        </div>
        <div class="time-block">
            <span id="seconds" class="time-value">00</span>
            <span class="time-label">Segundos</span>
        </div>
    </div>
    <div id="live-message" class="hidden">A CAÇADA COMEÇOU!</div>
</div>
        <nav class="nav-buttons">
            <a href="inscricao.html" class="btn">Inscrever-se</a>
            <button id="open-feedback-btn" class="btn">Feedback</button>
        </nav>
    </header>
    <main>
        <section class="section-container">
            <h2 class="section-title">Acompanhe Ao Vivo</h2>
            <div id="live-section">
                <div class="video-container">
                    <div id="player-wrapper"></div>
                    <div id="offline-overlay">
                         <img id="offline-image" src="https://i.postimg.cc/q7zY97QC/ca-adora.jpg" alt="Transmissão Offline">
                    </div>
                    <div id="live-indicator-wrapper" class="hidden"><div class="live-indicator">AO VIVO</div></div>
                </div>
              <div id="stream-switcher">
    <button class="stream-btn active" data-stream="stream1">Transmissão Principal</button>
    <button class="stream-btn" data-stream="stream2">Câmera 2</button>
    <button class="stream-btn" data-stream="stream3">Câmera 3</button>
</div>
            </div>
            
            <div id="dbd-unmute-popup">
                <p>Deseja ouvir os gritos de socorro?</p>
                <div class="popup-buttons">
                    <button id="unmute-yes-btn" class="popup-btn">Sim</button>
                    <button id="unmute-no-btn" class="popup-btn">Não</button>
                </div>
            </div>

            <div id="scoreboard-fab" class="scoreboard-fab">
                <img src="https://i.postimg.cc/YCSyWS5y/Gemini-Generated-Image-vpc766vpc766vpc7-Photoroom.png" alt="Ícone de Troféu"/>
            </div>
        </section>
        <section id="regras" class="section-container">
            <section class="section-container">
    <h2 class="section-title">Chat da Entidade</h2>
    <div id="chat-messages">
        </div>
    <form id="chat-form">
        <div class="form-group" id="name-group">
            <input type="text" id="chat-name" placeholder="Digite seu nome para entrar..." required>
            <button type="button" id="enter-chat-btn">Entrar no Chat</button>
        </div>
        <div class="form-group hidden" id="message-group">
            <input type="text" id="chat-message" placeholder="Digite sua mensagem..." required disabled>
            <button type="submit" disabled>Enviar</button>
       
    <div id="mention-suggestions" class="suggestions-box hidden"></div>
    </div>
    </form>
</section>
            <h2 class="section-title">Regras do Torneio</h2>
            <ul>
                <li>Cada equipe é composta por 4 (quatro) sobreviventes.</li>
                <li>Atrasos superiores a 10 minutos resultarão em W.O.</li>
                <li>Todas as decisões da organização do torneio são finais e inquestionáveis.</li>
            </ul>
        </section>
    </main>

   <div id="scoreboard-overlay" class="popup-overlay">
    <div class="scoreboard-popup">
        <button id="close-scoreboard-btn" class="close-btn">×</button>
        <h2>Placar do Torneio</h2>
        
        <p id="last-updated-timestamp"></p>

        <div class="score-display">
            <div class="score-card">
                <h3><img src="https://i.postimg.cc/YCSyWS5y/Gemini-Generated-Image-vpc766vpc766vpc7-Photoroom.png" alt="Ícone Troféu"> Placar das Equipes</h3>
                <ol id="teams-leaderboard" class="leaderboard-list"></ol>
            </div>
        </div>
    </div>
</div>
    
    <div id="feedback-popup-overlay" class="popup-overlay">
        <div class="feedback-popup">
            <button id="close-feedback-btn" class="close-btn">×</button>
            <div id="feedback-form-content">
                <h2>Sua Opinião Importa</h2>
                <form id="feedback-form" action="https://formspree.io/f/xpwrwpzo" method="POST">
                    <div class="form-row">
                        <div class="form-group"><label for="feedback-name">Seu Nome</label><input type="text" id="feedback-name" name="name" required></div>
                        <div class="form-group"><label for="feedback-email">Seu Email</label><input type="email" id="feedback-email" name="email" required></div>
                    </div>
                    <div class="form-group"><label for="feedback-message">Sua Mensagem</label><textarea id="feedback-message" name="message" required></textarea></div>
                    <button type="submit" class="submit-feedback">Enviar Feedback</button>
                </form>
            </div>
            <div id="feedback-success-content" class="feedback-success hidden">
                <div class="icon">✔</div><h3>Enviado!</h3><p>Obrigado pelo seu feedback.</p>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <script>
    // --- COLE AQUI A CONFIGURAÇÃO DO FIREBASE ---
    const firebaseConfig = {
        apiKey: "AIzaSyA_eqbuIT9Pe3z1NlTG6EQIForIM3uNv_c",
        authDomain: "placar-dbd-torneio.firebaseapp.com",
        databaseURL: "https://placar-dbd-torneio-default-rtdb.firebaseio.com",
        projectId: "placar-dbd-torneio",
        storageBucket: "placar-dbd-torneio.appspot.com",
        messagingSenderId: "704704412861",
        appId: "1:704704412861:web:0a9214ac40b9518fa64bd4",
        measurementId: "G-SJL640013X"
    };
    // --- FIM DA CONFIGURAÇÃO ---

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

   // ✨ NOVO: Objeto para armazenar os IDs das suas 3 transmissões
const STREAM_IDS = {
    stream1: 'COLAR_ID_DA_LIVE_1', // SUBSTITUA PELO ID REAL DA SUA LIVE PRINCIPAL
    stream2: 'COLAR_ID_DA_LIVE_2', // SUBSTITUA PELO ID REAL DA LIVE 2
    stream3: 'COLAR_ID_DA_LIVE_3'  // SUBSTITUA PELO ID REAL DA LIVE 3
};

let player;
let currentStreamKey = 'stream1'; // Define a transmissão padrão que será carregada primeiro

window.onYouTubeIframeAPIReady = function() {
    player = new YT.Player('player-wrapper', {
        videoId: STREAM_IDS[currentStreamKey], // Carrega a live padrão
        playerVars: { 'autoplay': 1, 'mute': 1, 'playsinline': 1, 'controls': 1 },
        events: { 'onStateChange': onPlayerStateChange }
    });
};

    document.addEventListener('DOMContentLoaded', function() {
       // ✨ NOVO: Lógica para trocar a transmissão
    const streamSwitcher = document.getElementById('stream-switcher');
    const streamButtons = document.querySelectorAll('.stream-btn');

    streamSwitcher.addEventListener('click', (e) => {
        // Verifica se o clique foi em um botão de stream e não é o ativo
        if (e.target.classList.contains('stream-btn') && !e.target.classList.contains('active')) {
            const newStreamKey = e.target.dataset.stream;

            // Se o player estiver pronto, carrega o novo vídeo
            if (player && typeof player.loadVideoById === 'function') {
                player.loadVideoById(STREAM_IDS[newStreamKey]);
                currentStreamKey = newStreamKey;

                // Atualiza a classe 'active' nos botões
                streamButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');
            }
        }
    });
        
        // --- INÍCIO: LÓGICA DO CHAT AO VIVO (COM NOVAS FUNÇÕES) ---
        const chatNameInput = document.getElementById('chat-name');
        const enterChatBtn = document.getElementById('enter-chat-btn');
        const nameGroup = document.getElementById('name-group');
        const chatForm = document.getElementById('chat-form');
        const chatMessageInput = document.getElementById('chat-message');
        const messageGroup = document.getElementById('message-group');
        const chatMessages = document.getElementById('chat-messages');
        const chatSubmitButton = messageGroup.querySelector('button');
        const messagesRef = database.ref('chatMessages');

        const suggestionsBox = document.getElementById('mention-suggestions');
        const participantsRef = database.ref('participants');
        let chatParticipants = new Set();
        let currentUser = '';

        const userColors = {};

        function getRandomColor() {
            const hue = Math.floor(Math.random() * 360);
            return `hsl(${hue}, 90%, 70%)`;
        }
        
        function escapeHTML(str) {
            const p = document.createElement('p');
            p.textContent = str;
            return p.innerHTML;
        }

        // ✨ NOVO: Função para exibir mensagens do sistema no chat
        function displaySystemMessage(text) {
            const messageElement = document.createElement('div');
            messageElement.className = 'chat-system-message';
            messageElement.textContent = text;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function activateChat(name) {
            currentUser = name;
            chatNameInput.value = name;
            chatNameInput.disabled = true;
            nameGroup.classList.add('hidden');
            messageGroup.classList.remove('hidden');
            chatMessageInput.disabled = false;
            chatSubmitButton.disabled = false;
            chatMessageInput.focus();

            const participantRef = participantsRef.child(name);
            participantRef.set(true);
            participantRef.onDisconnect().remove();
        }

        participantsRef.on('child_added', (snapshot) => {
            chatParticipants.add(snapshot.key);
        });
        participantsRef.on('child_removed', (snapshot) => {
            chatParticipants.delete(snapshot.key);
        });


        const savedName = localStorage.getItem('dbdChatName');
        if (savedName) {
            activateChat(savedName);
        }

        enterChatBtn.addEventListener('click', () => {
            const name = chatNameInput.value.trim();
            if (name) {
                if (chatParticipants.has(name)) {
                    alert(`O nome "${name}" já está em uso. Por favor, escolha outro.`);
                    return;
                }
                localStorage.setItem('dbdChatName', name);
                activateChat(name);
            }
        });
        
        chatMessageInput.addEventListener('input', () => {
            const cursorPos = chatMessageInput.selectionStart;
            const textBeforeCursor = chatMessageInput.value.substring(0, cursorPos);
            const lastAtIndex = textBeforeCursor.lastIndexOf('@');
            const lastSpaceIndex = textBeforeCursor.lastIndexOf(' ');

            if (lastAtIndex > lastSpaceIndex) {
                const searchTerm = textBeforeCursor.substring(lastAtIndex + 1).toLowerCase();
                const suggestions = [...chatParticipants].filter(name => 
                    name.toLowerCase().startsWith(searchTerm) && name !== currentUser
                );

                if (suggestions.length > 0) {
                    showSuggestions(suggestions, lastAtIndex);
                } else {
                    hideSuggestions();
                }
            } else {
                hideSuggestions();
            }
        });

        function showSuggestions(suggestions, atIndex) {
            suggestionsBox.innerHTML = '';
            suggestions.forEach(name => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.textContent = name;
                item.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    const text = chatMessageInput.value;
                    const before = text.substring(0, atIndex);
                    const after = text.substring(chatMessageInput.selectionStart);
                    chatMessageInput.value = `${before}@${name} ${after}`;
                    hideSuggestions();
                    chatMessageInput.focus();
                });
                suggestionsBox.appendChild(item);
            });
            suggestionsBox.classList.remove('hidden');
        }

        function hideSuggestions() {
            suggestionsBox.classList.add('hidden');
        }
        
        document.addEventListener('click', (e) => {
            if (e.target !== chatMessageInput) {
                hideSuggestions();
            }
        });

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const message = chatMessageInput.value.trim();

            if (message === '/limpar') {
                if (confirm('Tem certeza que deseja apagar TODAS as mensagens do chat para todos?')) {
                    messagesRef.remove();
                }
                chatMessageInput.value = '';
                return;
            }

            // ✨ NOVO: Comando para redefinir o nome de usuário
            if (message.startsWith('/nome ')) {
                const newName = message.substring(6).trim();
                const oldName = currentUser;

                if (!newName) {
                    displaySystemMessage('Uso inválido. Digite: /nome <seu_novo_nome>');
                } else if (newName === oldName) {
                    displaySystemMessage('Este já é o seu nome atual.');
                } else if (chatParticipants.has(newName)) {
                    displaySystemMessage(`O nome "${newName}" já está em uso. Tente outro.`);
                } else {
                    // Atualiza o nome no Firebase
                    participantsRef.child(oldName).remove();
                    const newParticipantRef = participantsRef.child(newName);
                    newParticipantRef.set(true);
                    newParticipantRef.onDisconnect().remove();

                    // Atualiza o estado local
                    currentUser = newName;
                    chatNameInput.value = newName;
                    localStorage.setItem('dbdChatName', newName);

                    // Transfere a cor do nome antigo para o novo
                    if (userColors[oldName]) {
                        userColors[newName] = userColors[oldName];
                        delete userColors[oldName];
                    }

                    displaySystemMessage(`Seu nome foi alterado de "${oldName}" para "${newName}"`);
                }
                
                chatMessageInput.value = '';
                return;
            }


            if (currentUser && message) {
                messagesRef.push({
                    name: currentUser,
                    message: message,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                chatMessageInput.value = '';
            }
        });
        
        messagesRef.limitToLast(100).on('child_added', (snapshot) => {
            const msg = snapshot.val();
            if (!msg || !msg.name || !msg.message) return;
            const messageElement = document.createElement('div');
            messageElement.classList.add('chat-message');
            messageElement.id = `msg-${snapshot.key}`;
            if (!userColors[msg.name]) {
                userColors[msg.name] = getRandomColor();
            }
            const nameSpan = document.createElement('span');
            nameSpan.className = 'name';
            nameSpan.textContent = msg.name + ':';
            nameSpan.style.color = userColors[msg.name];
            const messageSpan = document.createElement('span');
            messageSpan.className = 'text';
            const sanitizedMessage = escapeHTML(msg.message);
            const finalHTML = sanitizedMessage.replace(/@([\wÀ-ú]+)/g, '<span class="mention">@$1</span>');
            messageSpan.innerHTML = finalHTML;
            messageElement.appendChild(nameSpan);
            messageElement.appendChild(messageSpan);
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        });

        messagesRef.on('child_removed', (snapshot) => {
            const messageId = `msg-${snapshot.key}`;
            const elementToRemove = document.getElementById(messageId);
            if (elementToRemove) {
                elementToRemove.remove();
            }
        });

        messagesRef.on('value', (snapshot) => {
            if (!snapshot.exists()) {
                chatMessages.innerHTML = '';
            }
        });
        // --- FIM: LÓGICA DO CHAT AO VIVO ---


        // (O resto do seu código JS continua aqui, sem alterações)
        const visitorCountElement = document.getElementById('visitor-count');
        const presenceRef = database.ref('presence');
        const mySessionRef = presenceRef.push();
        mySessionRef.onDisconnect().remove();
        mySessionRef.set(true);
        presenceRef.on('value', (snapshot) => {
            const count = snapshot.numChildren();
            if (visitorCountElement) {
                visitorCountElement.textContent = count;
            }
        });
        const countdownDate = new Date("2025-10-31T20:00:00").getTime();
        const countdownContainer = document.getElementById('countdown-container');
        const timerElement = document.getElementById('timer');
        const liveMessageElement = document.getElementById('live-message');
        const countdownTitle = countdownContainer.querySelector('.countdown-title');
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const countdownInterval = setInterval(function() {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            if (distance < 0) {
                clearInterval(countdownInterval);
                timerElement.classList.add('hidden');
                countdownTitle.classList.add('hidden');
                liveMessageElement.classList.remove('hidden');
                return;
            }
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            daysEl.textContent = days < 10 ? '0' + days : days;
            hoursEl.textContent = hours < 10 ? '0' + hours : hours;
            minutesEl.textContent = minutes < 10 ? '0' + minutes : minutes;
            secondsEl.textContent = seconds < 10 ? '0' + seconds : seconds;
        }, 1000);
        const offlineOverlay = document.getElementById('offline-overlay');
        const liveIndicator = document.getElementById('live-indicator-wrapper');
        const unmutePopup = document.getElementById('dbd-unmute-popup');
        const unmuteYesBtn = document.getElementById('unmute-yes-btn');
        const unmuteNoBtn = document.getElementById('unmute-no-btn');
        let popupShown = false;
        window.onPlayerStateChange = function(event) {
            if (event.data === YT.PlayerState.PLAYING && !popupShown) {
                offlineOverlay.classList.add('hidden');
                liveIndicator.classList.remove('hidden');
                unmutePopup.classList.add('show');
                popupShown = true;
            }
        }
        unmuteYesBtn.addEventListener('click', (event) => {
            event.preventDefault();
            unmutePopup.classList.remove('show');
            if (player && typeof player.unMute === 'function') {
                player.unMute();
            }
        });
        unmuteNoBtn.addEventListener('click', (event) => {
            event.preventDefault();
            unmutePopup.classList.remove('show');
        });
        const feedbackOverlay = document.getElementById('feedback-popup-overlay');
        const openFeedbackBtn = document.getElementById('open-feedback-btn');
        const closeFeedbackBtn = document.getElementById('close-feedback-btn');
        const feedbackForm = document.getElementById('feedback-form');
        const formContent = document.getElementById('feedback-form-content');
        const successContent = document.getElementById('feedback-success-content');
        openFeedbackBtn.addEventListener('click', () => feedbackOverlay.classList.add('active'));
        if(closeFeedbackBtn) {
            closeFeedbackBtn.addEventListener('click', () => {
                feedbackOverlay.classList.remove('active');
                setTimeout(() => {
                    formContent.classList.remove('hidden');
                    successContent.classList.add('hidden');
                }, 400);
            });
        }
        feedbackForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(feedbackForm);
            const submitBtn = feedbackForm.querySelector('.submit-feedback');
            submitBtn.textContent = 'Enviando...';
            submitBtn.disabled = true;
            fetch(feedbackForm.action, {
                method: 'POST', body: formData, headers: { 'Accept': 'application/json' }
            }).then(response => {
                if (response.ok) {
                    formContent.classList.add('hidden');
                    successContent.classList.remove('hidden');
                } else {
                    alert('Houve um erro ao enviar seu feedback. Tente novamente.');
                    submitBtn.textContent = 'Enviar Feedback';
                    submitBtn.disabled = false;
                }
            }).catch(error => {
                alert('Houve um erro de conexão. Tente novamente.');
                submitBtn.textContent = 'Enviar Feedback';
                submitBtn.disabled = false;
            });
        });
        // SUBSTITUA TODO O BLOCO DO PLACAR POR ESTE CÓDIGO CORRIGIDO
const scoreboardFab = document.getElementById('scoreboard-fab');
const scoreboardOverlay = document.getElementById('scoreboard-overlay');
const closeScoreboardBtn = document.getElementById('close-scoreboard-btn');

// 🔧 CORRIGIDO: Referências aos elementos corretos do HTML
const teamsList = document.getElementById('teams-leaderboard'); 
const timestampElement = document.getElementById('last-updated-timestamp');

scoreboardFab.addEventListener('click', () => scoreboardOverlay.classList.add('active'));
closeScoreboardBtn.addEventListener('click', () => scoreboardOverlay.classList.remove('active'));

// ✨ ATUALIZADO: Função completa que atualiza a lista E o carimbo de data/hora
function updateLeaderboard(snapshot, listElement, timestampEl) {
    const data = snapshot.val();
    listElement.innerHTML = '<li>Carregando...</li>';

    if (data) {
        const now = new Date();
        const pad = (num) => num.toString().padStart(2, '0');
        const formattedDate = `${pad(now.getDate())}/${pad(now.getMonth() + 1)}/${now.getFullYear()}`;
        const formattedTime = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
        timestampEl.textContent = `Última atualização: ${formattedDate} às ${formattedTime}`;
    } else {
        timestampEl.textContent = 'Ainda não há dados no placar.';
    }

    if (data) {
        listElement.innerHTML = '';
        const entries = Object.keys(data).map(key => ({ id: key, ...data[key] }));
        
        const sortedEntries = entries.sort((a, b) => b.score - a.score);
        
        if (sortedEntries.length === 0) {
            listElement.innerHTML = '<li>Nenhuma equipe registrada ainda.</li>';
        } else {
            sortedEntries.forEach((entry, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${index + 1}. <span class="name">${entry.name}</span></span><span class="score">${entry.score} pts</span>`;
                listElement.appendChild(li);
            });
        }
    } else {
        listElement.innerHTML = '<li>Nenhuma equipe registrada ainda.</li>';
    }
}

// 🔧 CORRIGIDO: Listener que chama a função com os parâmetros corretos
const teamsRef = database.ref('teams');
teamsRef.on('value', (snapshot) => {
    updateLeaderboard(snapshot, teamsList, timestampElement);
});
    });
        document.addEventListener('DOMContentLoaded', function() {
    const openFeedbackBtnHeader = document.getElementById('open-feedback-btn');
    const openFeedbackBtnFooter = document.getElementById('open-feedback-btn-footer');
    const feedbackOverlay = document.getElementById('feedback-popup-overlay');

    if (openFeedbackBtnFooter && feedbackOverlay) {
        openFeedbackBtnFooter.addEventListener('click', () => feedbackOverlay.classList.add('active'));
    }
});
</script>
        <a href="niveis.html" class="grimorio-flutuante">
    <img src="https://i.imgur.com/KhwS5jZ.gif" alt="Grimório da Entidade">
    <span>Grimório dos Killers</span>
</a>
    <footer>
    <div class="footer-content">
        <div class="footer-logo">
            <img src="https://i.imgur.com/ElV8c5i.png" alt="Ícone da Entidade">
        </div>
        
        <p class="footer-copyright">© 2024 Torneio da Entidade. Todos os direitos reservados.</p>
        
        <nav class="footer-links">
            <a href="admin.html" target="_blank">Administrador</a>
            <a href="resultados.html" target="_blank">Sorteios</a>
            <a href="niveis.html" target="_blank">Grimório</a>
        </nav>
    </div>
</footer>
</body>
</html>
