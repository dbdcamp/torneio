<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="icon" type="image/png" href="https://i.imgur.com/EIcTCVt.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torneio Dead by Daylight - Ao Vivo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cor-principal: #ff4d4d;
            --cor-fundo-container: rgba(15, 15, 15, 0.9);
            --cor-borda: #4a0e0e;
            --cor-borda-forte: #8B0000;
            --cor-texto: #f0f0f0;
            --cor-cinza-botao: #3a3a3a;
        }
        body {
            margin: 0; padding: 0; font-family: 'Roboto', sans-serif;
            color: var(--cor-texto);
            background-image: url('https://i.imgur.com/Vlh2Ik7.jpeg');
            background-size: cover; background-position: center; background-attachment: fixed;
            backdrop-filter: brightness(0.6);
        }
        header {
            background-color: rgba(10, 10, 10, 0.8); border-bottom: 2px solid var(--cor-borda);
            padding: 15px 5%; position: sticky; top: 0; z-index: 2000;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px);
        }
        .logo h1 { font-family: 'Creepster', cursive; font-size: 2.5rem; color: var(--cor-principal); margin: 0; }
        .nav-buttons { display: flex; gap: 15px; }
        .nav-buttons .btn {
            font-weight: bold; text-decoration: none; color: var(--cor-texto);
            background-color: var(--cor-borda-forte); padding: 10px 20px;
            border-radius: 5px; transition: all 0.3s ease; text-transform: uppercase;
            border: none; font-size: 0.9rem; cursor: pointer;
        }
        .nav-buttons .btn:hover { background-color: var(--cor-principal); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4); }

        main { padding: 40px 5%; max-width: 1400px; margin: 0 auto; }
        .section-container {
            background-color: var(--cor-fundo-container); padding: 30px; border-radius: 10px;
            border: 2px solid var(--cor-borda); box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
            margin-bottom: 40px; animation: fadeIn 1s ease-in-out;
            position: relative; 
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .section-title { font-family: 'Creepster', cursive; font-size: 3rem; color: var(--cor-principal); text-align: center; margin-top: 0; margin-bottom: 30px; }
        
        #live-section { max-width: 960px; margin: 0 auto; }
        .video-container {
            position: relative; width: 100%; padding-top: 56.25%; 
            background-color: #000; border-radius: 5px; border: 1px solid var(--cor-borda);
        }
        .video-container > div, .video-container > iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        #player-wrapper iframe { width: 100%; height: 100%; border: none; }
        #offline-image { width: 100%; height: 100%; object-fit: cover; }
        .live-indicator {
            position: absolute; top: 15px; left: 15px; background-color: var(--cor-principal);
            color: white; padding: 5px 10px; border-radius: 5px; font-weight: bold; z-index: 20;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 50% { box-shadow: 0 0 20px rgba(255, 77, 77, 1); } }
        .hidden { display: none !important; }

        #regras ul { list-style: none; padding: 0; }
        #regras li { background-color: rgba(0, 0, 0, 0.2); padding: 15px 20px; margin-bottom: 10px; border-left: 4px solid var(--cor-borda-forte); }
        #regras li::before { content: "‚ò†Ô∏è"; margin-right: 15px; }

        #dbd-unmute-popup {
            position: absolute; bottom: 30px; left: 50%;
            transform: translateX(-50%) translateY(200%); 
            background-color: var(--cor-fundo-container); padding: 20px;
            border-radius: 10px; border: 1px solid var(--cor-borda-forte);
            box-shadow: 0 0 25px rgba(0,0,0,0.7); z-index: 2000;
            text-align: center; transition: transform 0.4s ease-out, opacity 0.4s ease-out;
            width: auto; max-width: 90%; opacity: 0; pointer-events: none;
        }
        #dbd-unmute-popup.show { transform: translateX(-50%) translateY(0); opacity: 1; pointer-events: auto; }
        #dbd-unmute-popup p { margin: 0 0 15px 0; font-size: 1.1rem; color: var(--cor-texto); }
        .popup-buttons { display: flex; gap: 10px; justify-content: center; }
        .popup-btn {
            border: none; padding: 10px 25px; border-radius: 5px;
            font-weight: bold; font-size: 1rem; cursor: pointer; transition: all 0.2s ease;
        }
        .popup-btn:hover { transform: translateY(-2px); }
        #unmute-yes-btn { background-color: var(--cor-borda-forte); color: white; }
        #unmute-yes-btn:hover { background-color: var(--cor-principal); }
        #unmute-no-btn { background-color: var(--cor-cinza-botao); color: var(--cor-texto); }
        #unmute-no-btn:hover { background-color: #555; }
        
        .popup-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85); z-index: 3000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
            transition: opacity 0.4s ease; backdrop-filter: blur(5px);
        }
        .popup-overlay.active { opacity: 1; pointer-events: auto; }
        .feedback-popup {
            background-color: #110e0e; border: 1px solid var(--cor-borda);
            box-shadow: 0 0 40px rgba(0,0,0,0.8); border-radius: 10px; padding: 30px 40px;
            width: 90%; max-width: 500px; position: relative;
            transform: scale(0.9); transition: transform 0.4s ease;
        }
        .popup-overlay.active .feedback-popup { transform: scale(1); }
        /* Adicione esta nova classe para alinhar pop-ups no topo */
.popup-overlay.align-top {
    align-items: flex-start; /* Em vez de 'center', alinha no topo */
}
        /* Encontre a regra do popup de feedback e adicione a margem */
.feedback-popup {
    background-color: #110e0e; 
    border: 1px solid var(--cor-borda);
    box-shadow: 0 0 40px rgba(0,0,0,0.8); 
    border-radius: 10px; 
    padding: 30px 40px;
    width: 90%; 
    max-width: 500px; 
    position: relative;
    transform: scale(0.9); 
    transition: transform 0.4s ease;
    margin-top: 30vh; /* ‚ú® ADICIONE ESTA LINHA ‚ú® */
}

/* Encontre a regra do popup do placar e adicione a mesma margem */
.scoreboard-popup {
    background-color: #110e0e; 
    border: 1px solid var(--cor-borda);
    box-shadow: 0 0 40px rgba(0,0,0,0.8); 
    border-radius: 10px; 
    padding: 30px 40px;
    width: 90%; 
    max-width: 800px; 
    position: relative;
    transform: scale(0.9); 
    transition: transform 0.4s ease;
    margin-top: 15vh; /* ‚ú® ADICIONE ESTA LINHA ‚ú® */
}
        .feedback-popup .close-btn {
            position: absolute; top: 15px; right: 20px;
            background: none; border: none; font-size: 2rem;
            color: #888; cursor: pointer; transition: color 0.3s;
        }
        .feedback-popup .close-btn:hover { color: var(--cor-principal); }
        .feedback-popup h2 { font-family: 'Creepster', cursive; color: var(--cor-principal); font-size: 2.8rem; text-align: center; margin: 0 0 25px 0; }
        .feedback-popup .form-row { display: flex; gap: 20px; margin-bottom: 20px; }
        .feedback-popup .form-group { flex: 1; margin-bottom: 20px; }
        .feedback-popup .form-row .form-group { margin-bottom: 0; }
        @media (max-width: 520px) {
            .feedback-popup .form-row { flex-direction: column; gap: 0; }
            .feedback-popup .form-row .form-group { margin-bottom: 20px; }
        }
        .feedback-popup .form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #ccc; font-size: 0.8rem; text-transform: uppercase; }
        .feedback-popup .form-group input, .feedback-popup .form-group textarea {
            width: 100%; padding: 12px; background-color: rgba(0, 0, 0, 0.4); border: 1px solid #555;
            border-radius: 5px; color: #fff; font-size: 1rem;
            box-sizing: border-box; font-family: 'Roboto', sans-serif;
        }
        .feedback-popup .form-group textarea { resize: vertical; min-height: 120px; }
        .submit-feedback {
            width: 100%; border: none; background-color: var(--cor-borda-forte);
            color: white; padding: 15px; border-radius: 5px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            transition: all 0.3s; margin-top: 10px;
        }
        .submit-feedback:hover { background-color: var(--cor-principal); }
        .feedback-success { text-align: center; padding: 40px 20px; }
        .feedback-success .icon { font-size: 4rem; color: var(--cor-principal); animation: popIn 0.5s ease; }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } }
        .feedback-success h3 { font-family: 'Creepster', cursive; font-size: 2.5rem; margin: 15px 0 10px 0; }
        
        /* --- ESTILOS DO PLACAR E BOT√ÉO REPOSICIONADO --- */
        .scoreboard-fab {
            position: absolute; /* Posi√ß√£o relativa ao .section-container */
            bottom: 20px;
            right: 20px;
            background-color: var(--cor-borda-forte);
            border-radius: 30px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
            color: var(--cor-texto);
            font-weight: bold;
            font-size: 1rem;
        }
        .scoreboard-fab:hover { background-color: var(--cor-principal); transform: scale(1.05); }
        .scoreboard-fab img { width: 50px; height: 50px; }

        .scoreboard-popup {
            background-color: #110e0e; border: 1px solid var(--cor-borda);
            box-shadow: 0 0 40px rgba(0,0,0,0.8); border-radius: 10px; padding: 30px 40px;
            width: 90%; max-width: 800px; position: relative;
            transform: scale(0.9); transition: transform 0.4s ease;
        }
        .popup-overlay.active .scoreboard-popup { transform: scale(1); }
        .scoreboard-popup .close-btn {
            position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 2rem;
            color: #888; cursor: pointer; transition: color 0.3s;
        }
        .scoreboard-popup .close-btn:hover { color: var(--cor-principal); }
        .scoreboard-popup h2 { font-family: 'Creepster', cursive; color: var(--cor-principal); font-size: 2.8rem; text-align: center; margin: 0 0 25px 0; }
        .score-display { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .score-card { background-color: rgba(0,0,0,0.4); padding: 20px; border-radius: 5px; }
        .score-card h3 {
            margin: 0 0 15px 0; font-size: 1.2rem; text-transform: uppercase;
            display: flex; align-items: center; justify-content: center;
            gap: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--cor-borda);
        }
        .score-card h3 img { height: 60px; }
        .leaderboard-list { list-style: none; padding: 0; margin: 0; min-height: 288px; }
        .leaderboard-list li { display: flex; justify-content: space-between; padding: 8px 5px; border-radius: 3px; font-size: 1.1rem; }
        .leaderboard-list li:nth-child(odd) { background-color: rgba(255,255,255,0.05); }
        .leaderboard-list .name { font-weight: bold; }
        .leaderboard-list .score { color: var(--cor-principal); font-weight: bold; }
        /* ===== NOVO LAYOUT DO CHAT (STATUS ACIMA, MENSAGEM AO LADO) ===== */
.chat-message {
    line-height: 1.4;
    margin-bottom: 15px;
    word-wrap: break-word;
}

.chat-message .name {
    /* Estilo do Nome de usu√°rio */
    font-weight: bold;
    line-height: 1.2;
    margin-right: 8px; /* <-- Voltamos a ter uma margem √† direita */
}

.watching-indicator {
    /* Status discreto ACIMA do nome */
    display: block;
    font-size: 0.7rem;
    color: #888; /* Um pouco mais claro que antes para ser leg√≠vel */
    font-style: italic;
    line-height: 1;
    margin-bottom: 4px; /* Espa√ßo entre o status e a linha do nome/mensagem */
    font-weight: normal;
}

.chat-message .text {
    /* O texto da mensagem volta a fluir normalmente */
    font-size: 0.95rem;
    display: inline; /* <-- Garante que fique ao lado do nome */
    padding-top: 0;
}
/* ================================================================= */
/* ======================================================= */
        @media (max-width: 768px) { .score-display { grid-template-columns: 1fr; } }
        /* --- IN√çCIO: ESTILOS DA CONTAGEM REGRESSIVA --- */
#countdown-container {
    flex-grow: 1;
    text-align: center;
    padding: 0 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-width: 300px; /* Largura m√≠nima para evitar quebra */
}
.countdown-title {
    margin: 0 0 5px 0;
    font-size: 1rem;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #ccc;
}
#timer {
    display: flex;
    justify-content: center;
    gap: 15px;
}
.time-block {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.time-value {
    font-family: 'Creepster', cursive;
    font-size: 2.5rem;
    color: var(--cor-principal);
    line-height: 1;
    animation: pulse-red-text 2s infinite;
}
.time-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    color: #aaa;
}
#live-message {
    font-family: 'Creepster', cursive;
    font-size: 2rem;
    color: var(--cor-principal);
    animation: pulse-red-text 1.5s infinite;
}
@keyframes pulse-red-text {
    50% { text-shadow: 0 0 15px var(--cor-principal); }
}
@media (max-width: 900px) {
    #countdown-container { display: none; } /* Esconde em telas pequenas para n√£o quebrar o layout */
}
/* --- FIM DOS ESTILOS --- */
        /* --- IN√çCIO: ESTILOS DO CONTADOR DE VISITANTES --- */
#visitor-counter {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #aaa;
    margin-top: 65px; /* Alinha com o logo */
    font-size: 0.9rem;
    text-shadow: 0 0 5px black;
    transform: translateX(-185px);
}
#visitor-counter .icon {
    font-size: 1.2rem;
    animation: pulse-red-text 3s infinite; /* Usa a anima√ß√£o cintilante */
}
#visitor-counter #visitor-count {
    font-weight: bold;
    color: var(--cor-principal);
    font-size: 1.1rem;
}
/* Esconde em telas pequenas para n√£o quebrar o layout */
@media (max-width: 768px) {
    #visitor-counter {
        display: none;
    }
}
/* --- FIM DOS ESTILOS --- */
        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        /* --- IN√çCIO: ESTILOS DO CHAT AO VIVO --- */
#chat-messages {
    height: 350px;
    overflow-y: auto;
    border: 1px solid #333;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 15px;
    display: flex;
    flex-direction: column;

    /* --- ADI√á√ïES PARA O FUNDO TEM√ÅTICO --- */
    background-image: 
        /* Camada de cor preta semi-transparente por cima */
        linear-gradient(rgba(15, 15, 15, 0.85), rgba(15, 15, 15, 0.85)),
        /* Sua imagem da Entidade por baixo */
        url('https://i.imgur.com/ElV8c5i.png');
    
    background-position: center; /* Centraliza a imagem */
    background-repeat: no-repeat; /* A imagem n√£o se repete */
    background-size: contain; /* Garante que a imagem caiba inteira na caixa */
}
        /* --- IN√çCIO: ESTILOS DO PLACEHOLDER DO CHAT --- */

/* Torna a caixa de mensagens um container para o placeholder */
#chat-messages {
    position: relative;
}

#chat-placeholder {
    /* Posicionamento */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    /* Apar√™ncia */
    color: rgba(255, 255, 255, 0.25); /* Cor bem sutil */
    text-align: center;
    width: 80%;
    pointer-events: none; /* Impede que o texto seja clic√°vel */
    transition: opacity 0.3s ease;
}

/* Esconde o placeholder quando o chat est√° ativo */
#chat-placeholder.hidden {
    opacity: 0;
}

#chat-placeholder .placeholder-icon {
    font-size: 3rem;
    margin-bottom: 10px;
    opacity: 0.5;
}

#chat-placeholder h4 {
    margin: 0 0 15px 0;
    font-family: 'Creepster', cursive;
    font-size: 1.8rem;
    font-weight: normal;
    color: rgba(255, 255, 255, 0.4);
}

#chat-placeholder p {
    margin: 5px 0;
    font-size: 0.9rem;
}

#chat-placeholder code {
    background-color: rgba(0,0,0,0.4);
    padding: 2px 5px;
    border-radius: 3px;
    font-family: monospace;
    color: rgba(255, 255, 255, 0.5);
}

/* --- FIM: ESTILOS DO PLACEHOLDER DO CHAT --- */
#chat-messages::-webkit-scrollbar { width: 8px; }
#chat-messages::-webkit-scrollbar-track { background: #1a1a1a; }
#chat-messages::-webkit-scrollbar-thumb { background: var(--cor-borda-forte); border-radius: 4px; }
.chat-message { margin-bottom: 12px; line-height: 1.4; word-wrap: break-word; }
.chat-message .name { 
    font-weight: bold; 
    /* color: var(--cor-principal); -- REMOVIDO DAQUI */
    margin-right: 8px; 
}

/* NOVO: Estilo para men√ß√µes no chat */
.chat-message .mention {
    background-color: var(--cor-principal);
    color: white;
    padding: 2px 5px;
    border-radius: 4px;
    font-weight: bold;
}

#chat-form .form-group {
    display: flex;
    gap: 15px;
}
#chat-form input {
    flex-grow: 1;
    padding: 12px;
    border-radius: 5px;
    border: 1px solid #555;
    background-color: #1a1a1a;
    color: #f0f0f0;
    font-size: 1rem;
    box-sizing: border-box;
}
#chat-form button {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    background-color: var(--cor-borda-forte);
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 1rem;
}
#chat-form button:hover { background-color: var(--cor-principal); }
        #message-group {
    position: relative;
}

/* NOVO: Estilos para a caixa de sugest√µes de men√ß√£o */
.suggestions-box {
    position: absolute;
    bottom: 100%; /* Aparece acima do campo de input */
    left: 0;
    right: 0;
    background-color: #1f1f1f;
    border: 1px solid var(--cor-borda);
    border-bottom: none;
    border-radius: 5px 5px 0 0;
    max-height: 160px;
    overflow-y: auto;
    z-index: 10; /* Garante que fique sobre outros elementos */
    box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
}

.suggestion-item {
    padding: 10px 15px;
    color: var(--cor-texto);
    cursor: pointer;
    border-bottom: 1px solid #333;
    font-size: 0.9rem;
}
.suggestion-item:last-child {
    border-bottom: none;
}
.suggestion-item:hover {
    background-color: var(--cor-borda-forte);
}
/* --- FIM: ESTILOS DO CHAT AO VIVO --- */
        /* NOVO: Estilo para mensagens do sistema no chat */
.chat-system-message {
    color: #a0a0a0;
    font-style: italic;
    text-align: center;
    margin: 8px 0;
    font-size: 0.9em;
}
        /* --- IN√çCIO: ESTILOS DE MENSAGENS PRIVADAS --- */

/* Indicador que aparece acima do campo de texto */
#private-message-indicator {
    background-color: rgba(139, 0, 0, 0.3);
    border: 1px solid var(--cor-borda-forte);
    padding: 8px 12px;
    border-radius: 5px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
    animation: fadeIn 0.3s ease;
}

#private-message-indicator span {
    font-style: italic;
}

#private-message-indicator button {
    background: var(--cor-principal);
    color: white;
    border: none;
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: background-color 0.2s;
}

#private-message-indicator button:hover {
    background-color: #ff2d2d;
}

/* Menu que aparece ao clicar no nome de um usu√°rio */
.context-menu {
    position: absolute;
    background-color: #2a2a2a;
    border: 1px solid var(--cor-borda);
    border-radius: 5px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    z-index: 1000;
    padding: 5px;
}

.context-menu-item {
    padding: 8px 15px;
    color: var(--cor-texto);
    cursor: pointer;
    font-size: 0.9rem;
}

.context-menu-item:hover {
    background-color: var(--cor-borda-forte);
}

/* Estilo para o nome clic√°vel */
.chat-message .name {
    cursor: pointer;
    transition: text-shadow 0.2s;
}
.chat-message .name:hover {
    text-shadow: 0 0 5px var(--cor-texto);
}

/* Estilo para a mensagem privada */
.private-message {
    background-color: rgba(112, 12, 12, 0.2);
    border-left: 3px solid #FFC107; /* Amarelo para destacar */
    padding: 10px;
    border-radius: 5px;
}

.private-message .pm-header {
    font-size: 0.8em;
    font-style: italic;
    color: #FFC107;
    margin-bottom: 5px;
}

/* --- FIM: ESTILOS DE MENSAGENS PRIVADAS --- */
      /* --- IN√çCIO: Estilos para troca de transmiss√£o --- */
#stream-switcher {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px; /* Espa√ßamento acima dos bot√µes */
}

.stream-btn {
    font-weight: bold;
    text-decoration: none;
    color: var(--cor-texto);
    background-color: var(--cor-cinza-botao); /* Cor padr√£o */
    padding: 10px 20px;
    border-radius: 5px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    border: 1px solid var(--cor-borda);
    font-size: 0.9rem;
    cursor: pointer;
}

.stream-btn:hover {
    background-color: #555;
    transform: translateY(-2px);
}

/* Estilo do bot√£o ativo (transmiss√£o selecionada) */
.stream-btn.active {
    background-color: var(--cor-principal);
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
    border-color: var(--cor-principal);
}
/* --- FIM: Estilos para troca de transmiss√£o --- */
        /* --- IN√çCIO: Estilos do Placar Atualizado --- */

/* ‚ú® NOVO: Estilo para o texto de data/hora da atualiza√ß√£o */
#last-updated-timestamp {
    color: #4CAF50; /* Um tom de verde */
    font-size: 0.9rem;
    font-style: italic;
    text-align: center;
    margin-top: -15px; /* Puxa para mais perto do t√≠tulo */
    margin-bottom: 25px;
}

/* üîß ALTERADO: For√ßa o placar a ter sempre uma coluna, j√° que agora √© uma lista s√≥ */
.score-display { 
    grid-template-columns: 1fr; 
}

/* Ajusta a altura m√≠nima para a nova lista √∫nica */
#teams-leaderboard {
    min-height: 400px;
}
/* --- FIM: Estilos do Placar Atualizado --- */
        /* ============================================= */
/* ‚ú® IN√çCIO: NOVOS ESTILOS DO GRIM√ìRIO FLUTUANTE (COM POSICIONAMENTO CORRIGIDO) ‚ú® */
/* ================================================================================= */

/* O cont√™iner que flutua */
#grimorio-container {
    position: fixed;
    /* ‚ú® VALORES EXATOS RESTAURADOS DO SEU C√ìDIGO ORIGINAL PARA PC ‚ú® */
    bottom: 1570px; 
    left: 280px;
    z-index: 1050;
    
    animation: flutuar 3s ease-in-out infinite;
    transition: transform 0.5s ease, filter 0.5s ease;
}

#grimorio-container:hover {
    transform: scale(1.1);
    filter: drop-shadow(0 0 15px var(--cor-principal));
    animation-play-state: paused;
}

/* Estilos para CADA item (livro) dentro do cont√™iner */
.grimorio-item {
    position: absolute; 
    top: 0;
    left: 0;
    transition: opacity 0.8s ease-in-out;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: var(--cor-texto);
}

.grimorio-item img {
    width: 80px;
    height: auto;
    margin-bottom: 5px;
}

.grimorio-item span {
    font-family: 'Creepster', cursive;
    font-size: 1.1rem;
    background-color: rgba(10, 10, 10, 0.7);
    padding: 5px 10px;
    border-radius: 5px;
    text-shadow: 0 0 5px black;
    text-align: center;
    width: 150px;
}

/* Classes de controle de visibilidade */
.grimorio-visible {
    opacity: 1;
    pointer-events: auto;
}
.grimorio-hidden {
    opacity: 0;
    pointer-events: none;
}

@keyframes flutuar {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
}

@media (max-width: 768px) {
    #grimorio-container {
        /* ‚ú® VALORES EXATOS RESTAURADOS DO SEU C√ìDIGO ORIGINAL PARA MOBILE ‚ú® */
        bottom: 230px;
        left: 15px;
    }
    .grimorio-item img {
        width: 60px;
    }
    .grimorio-item span {
        font-size: 0.8rem;
        width: 120px;
    }
}
/* --- FIM DOS NOVOS ESTILOS --- */
        footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: rgba(255, 255, 255, 0.1); /* Cor de fundo quase transparente */
    backdrop-filter: blur(15px); /* Efeito de vidro */
    border-top: 1px solid rgba(255, 255, 255, 0.2); /* Borda sutil */
    padding: 15px 5%; /* Espa√ßamento interno */
    z-index: 100; /* Garante que fique acima de outros elementos */
    color: #ddd; /* Cor do texto */
    font-size: 0.8rem;
             box-sizing: border-box; /* Isso resolve o problema da largura */
}

.footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1400px; /* Mant√©m a largura consistente com o main */
    margin: 0 auto;
}

.footer-links a, .footer-links button {
    color: #ccc;
    text-decoration: none;
    margin-left: 15px;
    transition: color 0.3s ease;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
}

.footer-links a:hover, .footer-links button:hover {
    color: var(--cor-principal);
}

.footer-links button {
    padding: 0; /* Remove padding padr√£o do bot√£o */
}

/* Estilo para telas menores */
@media (max-width: 768px) {
    .footer-content {
        flex-direction: column;
        text-align: center;
    }
    .footer-links {
        margin-top: 10px;
    }
    .footer-links a, .footer-links button {
        margin: 0 10px;
    }
}
        /* SUBSTITUA TODO O CSS DO SEU RODAP√â POR ESTE BLOCO */

footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: rgba(15, 15, 15, 0.2); /* Um pouco mais escuro para contraste */
    backdrop-filter: blur(15px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 5%; /* Diminu√≠ um pouco a altura */
    z-index: 100;
    box-sizing: border-box;
}

.footer-content {
    display: grid; /* Mude de flex para grid */
    grid-template-columns: 1fr auto 1fr; /* Cria 3 colunas: esquerda | centro | direita */
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    gap: 20px; /* Espa√ßamento entre as colunas */
}

/* Esquerda: Imagem */
.footer-logo img {
    height: 40px; /* Tamanho da imagem */
    width: auto;
    vertical-align: middle; /* Alinha verticalmente com o texto */
}

/* Centro: Texto de Copyright */
.footer-copyright {
    color: #ccc;
    font-size: 0.9rem;
    margin: 0;
    text-align: center; /* Garante que o texto fique centralizado em sua coluna */
}

/* Direita: Links */
.footer-links {
    display: flex;
    gap: 20px;
    justify-self: end; /* Alinha os links √† DIREITA de sua coluna */
}

.footer-links a, .footer-links button {
    color: #ccc;
    text-decoration: none;
    transition: color 0.3s ease;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0;
    font-family: 'Roboto', sans-serif; /* Garante a mesma fonte */
}

.footer-links a:hover, .footer-links button:hover {
    color: var(--cor-principal);
}

/* Media Query para telas pequenas */
@media (max-width: 850px) {
    .footer-content {
        flex-direction: column;
        gap: 10px;
    }
    .footer-copyright {
        /* Coloca o copyright no topo em telas pequenas */
        order: -1; 
    }
}
        /* =================================================== */
/* --- IN√çCIO: ESTILOS PARA DISPOSITIVOS M√ìVEIS --- */
/* =================================================== */
@media (max-width: 800px) {
    #transmissao {
    padding-left: 0;
    padding-right: 0;
    border-left: none;  /* Remove bordas laterais se houver */
    border-right: none;
}
    #transmissao .section-title,
#transmissao #stream-switcher {
    padding-left: 15px;
    padding-right: 15px;
}
    /* Diminui o tamanho da fonte dos n√∫meros */
.time-value {
    font-size: 1.4rem; /* Valor original era 2.5rem. Ajuste como preferir. */
}

/* Diminui o texto abaixo dos n√∫meros para manter a propor√ß√£o */
.time-label {
    font-size: 0.5rem; /* Valor original era 0.7rem. */
}

/* Diminui o espa√ßo entre os blocos de tempo */
#timer {
    gap: 7px; /* Valor original era 15px. */
}

    /* --- GERAL E CONTE√öDO PRINCIPAL --- */
    main {
        padding: 20px 15px; /* Menos espa√ßo nas laterais */
    }

@media (max-width: 800px) {
    /* Exibe novamente os elementos que estavam com "display: none" */
    #countdown-container,
    #visitor-counter {
        display: flex; /* ou 'block', dependendo do elemento */
    }
    @media (max-width: 800px) {
        #countdown-container {
        display: none;
    }
    /* --- CABE√áALHO --- */
    header {
        flex-direction: column; /* Itens um embaixo do outro */
        gap: 15px;              /* Espa√ßo entre eles */
    }

    /* --- RODAP√â --- */
    .footer-content {
        grid-template-columns: 1fr; /* Muda o grid para apenas uma coluna */
        justify-items: center;      /* Centraliza tudo */
        gap: 15px;
    }
@media (max-width: 800px) {
    header,
    footer {
        position: static; /* Remove a posi√ß√£o fixa/colada */
    }

    /* Adicione uma margem no topo do rodap√© para n√£o colar no conte√∫do */
    footer {
        margin-top: 30px; 
    }
    @media (max-width: 800px) {
    /* Reduz o espa√ßamento geral */
    main {
        padding: 20px 15px; 
    }
    .section-container {
        padding: 20px;
    }

    /* Diminui o tamanho das fontes principais */
    .logo h1 {
        font-size: 2rem;
    }
    .section-title {
        font-size: 2.2rem;
    }
        /* Dentro da sua media query de 800px ou uma nova para telas menores */
@media (max-width: 768px) {
    .grimorio-flutuante {
        bottom: 155px; /* Posi√ß√£o mais sensata para mobile */
        left: 15px;
        /* Pode tamb√©m diminuir o tamanho da imagem e da fonte aqui */
    }
}

/* Crie uma nova media query para telas muito pequenas, se necess√°rio */
@media (max-width: 480px) {
    #chat-form .form-group {
        flex-direction: column; /* Empilha o input e o bot√£o do chat */
        gap: 10px;
    }

    .section-container {
        padding: 20px; /* Menos espa√ßamento interno nos containers */
    }

    .section-title {
        font-size: 2.2rem; /* T√≠tulo um pouco menor */
        margin-bottom: 20px;
    }

    /* --- CABE√áALHO --- */
    header {
        flex-direction: column; /* Empilha os itens do cabe√ßalho */
        gap: 15px;
        padding: 15px;
        position: static; /* Remove o 'sticky' para n√£o ocupar espa√ßo fixo */
    }
    
    #visitor-counter {
        margin-top: 0; /* Remove a margem superior */
        transform: translateX(0); /* Reseta o posicionamento */
        order: 3; /* Coloca o contador no final */
    }

    .logo h1 {
        font-size: 2rem; /* T√≠tulo principal menor */
    }

    .nav-buttons {
        width: 100%;
        justify-content: center;
    }

    /* --- BOT√ïES DE TROCA DE TRANSMISS√ÉO --- */
    #stream-switcher {
        flex-direction: column; /* Empilha os bot√µes */
        align-items: stretch; /* Faz os bot√µes ocuparem toda a largura */
        gap: 10px;
    }

    /* --- PLACAR E FEEDBACK (POP-UPS) --- */
.scoreboard-popup,
.feedback-popup {
    padding: 25px 15px;          /* Diminui um pouco mais o espa√ßo nas laterais */
    width: 95%;                  /* Garante que n√£o fique colado nas bordas */
    box-sizing: border-box;      /* IMPORTANTE: Faz com que o padding seja inclu√≠do na largura total, e n√£o somado a ela. */
}
    
    .scoreboard-popup h2,
    .feedback-popup h2 {
        font-size: 2.3rem; /* T√≠tulos dos pop-ups menores */
    }

    .score-display {
        gap: 20px;
    }
    
    .leaderboard-list {
        min-height: 250px; /* Altura menor no mobile */
    }

    .scoreboard-fab {
        right: -5px;
        bottom: -90px;
        padding: 8px 15px;
        font-size: 0.9rem;
    }

    .scoreboard-fab img {
        width: 40px;
        height: 40px;
    }

    /* --- REGRAS --- */
    #regras li {
        padding: 15px;
        font-size: 0.9rem;
    }
    #regras li::before {
        margin-right: 10px;
    }

    /* --- RODAP√â --- */
    footer {
        position: static; /* Remove o 'fixed' para que o rodap√© fique no final do conte√∫do */
        margin-top: 30px;
    }
    
    .footer-content {
        /* A regra que voc√™ j√° tem para flex-direction: column em 850px vai funcionar aqui */
        grid-template-columns: 1fr; /* Muda o grid para uma √∫nica coluna */
        justify-items: center; /* Centraliza tudo */
        gap: 15px;
    }
    .footer-logo {
        grid-row: 2; /* Move o logo para o meio */
    }
    .footer-copyright {
        order: 0; /* Ordem padr√£o */
        grid-row: 1; /* Move o copyright para cima */
    }
    .footer-links {
        justify-self: center; /* Centraliza os links */
        grid-row: 3; /* Move os links para baixo */
    }
}

/* Ajustes finos para telas bem pequenas */
@media (max-width: 480px) {
    .logo h1 {
        font-size: 1.8rem;
    }
    .section-title {
        font-size: 2rem;
    }
    .scoreboard-popup h2,
    .feedback-popup h2 {
        font-size: 2rem;
    }
    
    /* Empilha o formul√°rio do chat */
    #chat-form .form-group {
        flex-direction: column;
        gap: 10px;
    }
    #chat-form button {
        width: 100%;
    }
    
    #live-section {
        max-width: 100%; /* Permite que o v√≠deo ocupe todo o espa√ßo dispon√≠vel */
    }

    /* Ajusta o formul√°rio de feedback que j√° tinha media query */
    .feedback-popup .form-row {
        flex-direction: column;
        gap: 0;
    }
    .feedback-popup .form-row .form-group {
        margin-bottom: 20px;
    }
/* --- ESTILO PARA O BOT√ÉO DE TELA CHEIA CUSTOMIZADO --- */

#custom-fullscreen-btn {
    position: absolute; /* Para sobrepor o v√≠deo */
    top: 10px;
    right: 10px;
    z-index: 25; /* Garante que fique acima do v√≠deo */
    
    background-color: rgba(0, 0, 0, 0.6);
    border: none;
    border-radius: 5px;
    padding: 8px;
    cursor: pointer;
    
    /* POR PADR√ÉO, O BOT√ÉO FICA ESCONDIDO NO PC */
    display: none; 
    transition: background-color 0.2s;
}

#custom-fullscreen-btn:hover {
    background-color: rgba(255, 0, 0, 0.7);
}

/* Estilo do √≠cone SVG dentro do bot√£o */
#custom-fullscreen-btn svg {
    width: 20px;
    height: 20px;
    fill: #ffffff;
    display: block;
}

/* A M√ÅGICA PARA APARECER S√ì NO MOBILE */
@media (max-width: 800px) {
    #custom-fullscreen-btn {
        /* Apenas em telas menores, o bot√£o passa a ser vis√≠vel */
        display: block; 
    }
/* --- ESTILO PARA A ANIMA√á√ÉO DE CARREGAMENTO DO V√çDEO --- */

#video-loader {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 15; /* Abaixo do indicador de "AO VIVO" e bot√£o, mas acima da imagem */
    
    background-color: rgba(10, 10, 10, 0.7);
    backdrop-filter: blur(3px); /* Efeito de vidro para desfocar a imagem de fundo */

    /* Centraliza o conte√∫do da anima√ß√£o */
    display: flex;
    justify-content: center;
    align-items: center;
}

#video-loader .loader-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

/* O spinner (c√≠rculo que gira) */
#video-loader .loader-spinner {
    width: 50px;
    height: 50px;
    border: 5px solid rgba(255, 255, 255, 0.3); /* C√≠rculo cinza claro */
    border-top-color: var(--cor-principal); /* Parte de cima vermelha, que vai girar */
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* O texto */
#video-loader span {
    color: var(--cor-texto);
    font-weight: bold;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 2px;
}

/* A anima√ß√£o de rota√ß√£o do spinner */
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
    /* --- ESTILO PARA O BOT√ÉO DE INSCRI√á√ÉO DESATIVADO --- */
.btn.disabled {
    background-color: var(--cor-cinza-botao);
    color: #888;
    cursor: not-allowed;
    box-shadow: none;
}

/* Remove o efeito hover do bot√£o quando desativado */
.btn.disabled:hover {
    background-color: var(--cor-cinza-botao);
    transform: none;
    box-shadow: none;
}
}
    </style>
</head>
<body>
    <header>
        <div class="logo"><h1>Torneio da Entidade</h1></div>
        <div id="visitor-counter">
    <span class="icon">üëÅÔ∏è</span>
    <span id="visitor-count">1</span>
    <span class="text"></span>
</div>
        <div id="countdown-container">
    <p class="countdown-title">A Ca√ßada Come√ßa Em...</p>
    <div id="timer">
        <div class="time-block">
            <span id="days" class="time-value">00</span>
            <span class="time-label">Dias</span>
        </div>
        <div class="time-block">
            <span id="hours" class="time-value">00</span>
            <span class="time-label">Horas</span>
        </div>
        <div class="time-block">
            <span id="minutes" class="time-value">00</span>
            <span class="time-label">Minutos</span>
        </div>
        <div class="time-block">
            <span id="seconds" class="time-value">00</span>
            <span class="time-label">Segundos</span>
        </div>
    </div>
    <div id="live-message" class="hidden">A CA√áADA COME√áOU!</div>
</div>
        <nav class="nav-buttons">
            <a href="inscricao.html" class="btn" id="signup-btn">Inscrever-se</a>
            <button id="open-feedback-btn" class="btn">Feedback</button>
        </nav>
    </header>
    <main>
        <section class="section-container" id="transmissao">
            <h2 class="section-title">Acompanhe Ao Vivo</h2>
            <div id="live-section">
                <div class="video-container">
                    <div id="player-wrapper"></div>
                    <div id="offline-overlay">
                         <img id="offline-image" src="https://i.postimg.cc/q7zY97QC/ca-adora.jpg" alt="Transmiss√£o Offline">
                    </div>
                    <div id="video-loader" class="hidden">
    <div class="loader-content">
        <div class="loader-spinner"></div>
        <span>CARREGANDO A CA√áADA...</span>
    </div>
</div>
                    <div id="live-indicator-wrapper" class="hidden"><div class="live-indicator">AO VIVO</div></div>
                    <button id="custom-fullscreen-btn" class="hidden" title="Tela Cheia">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M5 5h5v2H7v3H5V5m9 0h5v5h-2V7h-3V5m3 9h2v5h-5v-2h3v-3m-7 3v-2H5v5h5v-3H8z"/>
        </svg>
    </button>
                </div>
              <div id="stream-switcher">
    <button class="stream-btn active" data-stream="stream1">Transmiss√£o Principal</button>
    <button class="stream-btn" data-stream="stream2">Transmiss√£o 2</button>
    <button class="stream-btn" data-stream="stream3">Transmiss√£o 3</button>
</div>
            </div>
            
            <div id="dbd-unmute-popup">
                <p>Deseja ouvir os gritos de socorro?</p>
                <div class="popup-buttons">
                    <button id="unmute-yes-btn" class="popup-btn">Sim</button>
                    <button id="unmute-no-btn" class="popup-btn">N√£o</button>
                </div>
            </div>

            <div id="scoreboard-fab" class="scoreboard-fab">
                <img src="https://i.postimg.cc/YCSyWS5y/Gemini-Generated-Image-vpc766vpc766vpc7-Photoroom.png" alt="√çcone de Trof√©u"/>
            </div>
        </section>
        <section id="regras" class="section-container">
            <section class="section-container">
    <h2 class="section-title">Chat da Entidade</h2>
    <div id="chat-messages">
         <div id="chat-placeholder">
        <div class="placeholder-icon">üí¨</div>
        <h4>Bem-vindo ao Chat da Entidade</h4>
        <p>Use <code>/nome SEUNOME</code> para mudar o nome de usu√°rio. Ex: /nome Chris.</p>
        <p>Clique no nome do usu√°rio para enviar uma DM.</p>
        <p>Digite <code>@</code> para mencionar algu√©m.</p>
    </div>
    </div>
                <div id="private-message-indicator" class="hidden">
    <span id="pm-info"></span>
    <button id="exit-pm-btn">Voltar ao Chat P√∫blico</button>
</div>
    <form id="chat-form">
        <div class="form-group" id="name-group">
            <input type="text" id="chat-name" placeholder="Digite seu nome para entrar..." required maxlength="15">
            <button type="button" id="enter-chat-btn">Entrar no Chat</button>
        </div>
        <div class="form-group hidden" id="message-group">
            <input type="text" id="chat-message" placeholder="Digite sua mensagem..." required disabled>
            <button type="submit" disabled>Enviar</button>
       
    <div id="mention-suggestions" class="suggestions-box hidden"></div>
    </div>
    </form>
</section>
            <h2 class="section-title">Regras do Torneio</h2>
            <ul>
                <li>Cada esquadr√£o ser√° formado por cinco almas: quatro destinadas √† Sobreviv√™ncia e uma encarregada da Ca√ßada.</li>
                <li>A Entidade n√£o espera. A toler√¢ncia para atrasos √© de 5 minutos, e o descumprimento implicar√° em derrota autom√°tica (W.O.).</li>
                <li>Assim como o julgamento da Entidade, as decis√µes da organiza√ß√£o s√£o absolutas e n√£o estar√£o sujeitas a apela√ß√µes, visando a integridade da competi√ß√£o.</li>
                <li>Assassinos capazes de um abate instant√¢neo devem honrar a ca√ßada, sendo proibida a pr√°tica de 'camperar'. A exce√ß√£o se aplica unicamente ao Ghost Face.</li>
                <li>O reino da Entidade exige respeito. Atos de desrespeito ou preconceito (verbal ou escrito) ser√£o punidos com a expuls√£o sum√°ria de toda a equipe do torneio.</li>
                <li>A agonia no ch√£o tem seus limites. Um Assassino com duas presas ca√≠das deve completar o ritual do gancho com uma delas antes de voltar seu foco para os demais.</li>
                <li>Para selar o destino da √∫ltima esperan√ßa, cada partida deve ser iniciada com uma oferenda que conjure a Escotilha no Santu√°rio do Assassino ou no pr√©dio principal.</li>
                <li>A engenhosidade √© a chave. Os quatro Sobreviventes devem adentrar a partida com itens √∫nicos, sendo proibida a repeti√ß√£o de arsenal entre os membros da equipe.</li>
                <li>A desobedi√™ncia √† entidade tem um pre√ßo. A equipe ou Assassino infrator perder√° o favor da Entidade, sofrendo com a subtra√ß√£o parcial ou total dos pontos e at√© mesmo com a desclassifica√ß√£o.</li>
                
            </ul>
        </section>
    </main>

   <div id="scoreboard-overlay" class="popup-overlay align-top">
    <div class="scoreboard-popup">
        <button id="close-scoreboard-btn" class="close-btn">√ó</button>
        <h2>Placar do Torneio</h2>
        
        <p id="last-updated-timestamp"></p>

        <div class="score-display">
            <div class="score-card">
                <h3><img src="https://i.postimg.cc/YCSyWS5y/Gemini-Generated-Image-vpc766vpc766vpc7-Photoroom.png" alt="√çcone Trof√©u"> Placar das Equipes</h3>
                <ol id="teams-leaderboard" class="leaderboard-list"></ol>
            </div>
        </div>
    </div>
</div>
    
    <div id="feedback-popup-overlay" class="popup-overlay align-top">
        <div class="feedback-popup">
            <button id="close-feedback-btn" class="close-btn">√ó</button>
            <div id="feedback-form-content">
                <h2>Sua Opini√£o Importa</h2>
                <form id="feedback-form" action="https://formspree.io/f/xpwrwpzo" method="POST">
                    <div class="form-row">
                        <div class="form-group"><label for="feedback-name">Seu Nome</label><input type="text" id="feedback-name" name="name" required></div>
                        <div class="form-group"><label for="feedback-email">Seu Email</label><input type="email" id="feedback-email" name="email" required></div>
                    </div>
                    <div class="form-group"><label for="feedback-message">Sua Mensagem</label><textarea id="feedback-message" name="message" required></textarea></div>
                    <button type="submit" class="submit-feedback">Enviar Feedback</button>
                </form>
            </div>
            <div id="feedback-success-content" class="feedback-success hidden">
                <div class="icon">‚úî</div><h3>Enviado!</h3><p>Obrigado pelo seu feedback.</p>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <script>
    // --- COLE AQUI A CONFIGURA√á√ÉO DO FIREBASE ---
    const firebaseConfig = {
        apiKey: "AIzaSyA_eqbuIT9Pe3z1NlTG6EQIForIM3uNv_c",
        authDomain: "placar-dbd-torneio.firebaseapp.com",
        databaseURL: "https://placar-dbd-torneio-default-rtdb.firebaseio.com",
        projectId: "placar-dbd-torneio",
        storageBucket: "placar-dbd-torneio.appspot.com",
        messagingSenderId: "704704412861",
        appId: "1:704704412861:web:0a9214ac40b9518fa64bd4",
        measurementId: "G-SJL640013X"
    };
    // --- FIM DA CONFIGURA√á√ÉO ---

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const isLiveNow = true; // MUDE PARA false QUANDO N√ÉO HOUVER LIVE

   // ‚ú® NOVO: Objeto para armazenar os IDs das suas 3 transmiss√µes
const STREAM_IDS = {
    stream1: 'ID_DA_LIVE_1', // SUBSTITUA PELO ID REAL DA SUA LIVE PRINCIPAL
    stream2: 'ID_DA_LIVE_2', // SUBSTITUA PELO ID REAL DA LIVE 2
    stream3: 'ID_DA_LIVE_3'  // SUBSTITUA PELO ID REAL DA LIVE 3
};

let player;
let currentStreamKey = 'stream1'; // Define a transmiss√£o padr√£o que ser√° carregada primeiro

window.onYouTubeIframeAPIReady = function() {
    // Se a vari√°vel isLiveNow for true...
    if (isLiveNow) {
        // ...mostra a nossa anima√ß√£o de carregamento...
        //document.getElementById('video-loader').classList.remove('hidden');

        // ...e ent√£o cria o player do YouTube.
        player = new YT.Player('player-wrapper', {
            videoId: STREAM_IDS[currentStreamKey], // Carrega a live padr√£o
            playerVars: { 'autoplay': 1, 'mute': 1, 'playsinline': 1, 'controls': 1 },
            events: { 'onStateChange': onPlayerStateChange }
        });
    }
    // Se isLiveNow for false, nada acontece, e a imagem offline continua vis√≠vel por padr√£o.
};
    document.addEventListener('DOMContentLoaded', function() {
        const fullscreenBtn = document.getElementById('custom-fullscreen-btn');
const videoContainer = document.querySelector('.video-container');
       // ‚ú® NOVO: L√≥gica para trocar a transmiss√£o
    const streamSwitcher = document.getElementById('stream-switcher');
    const streamButtons = document.querySelectorAll('.stream-btn');

    streamSwitcher.addEventListener('click', (e) => {
        // Verifica se o clique foi em um bot√£o de stream e n√£o √© o ativo
        if (e.target.classList.contains('stream-btn') && !e.target.classList.contains('active')) {
            const newStreamKey = e.target.dataset.stream;

            // Se o player estiver pronto, carrega o novo v√≠deo
            if (player && typeof player.loadVideoById === 'function') {
                player.loadVideoById(STREAM_IDS[newStreamKey]);
                currentStreamKey = newStreamKey;

                // Atualiza a classe 'active' nos bot√µes
                streamButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');
            }
        }
    });
        
        // --- IN√çCIO: L√ìGICA DO CHAT AO VIVO (COMANDOS, DMs E MEN√á√ïES CORRIGIDAS) ---
const MAX_MESSAGE_LENGTH = 400;
const MAX_USERNAME_LENGTH = 15;
const palavrasImproprias = ['idiota', 'idiotas', 'viadinho', 'laskar', 'lascar', 'p√¥po', 'pop√¥', 'p√¥p√¥', 'popo', 'bumbum', 'bunda', 'dedada', 'lamber', 'linguada', 'boquetinho', 'boquet√£o', 'boquetao', 'bouquete', 'boquete', 'genital', 'genitalha', 'camaco', 'dotada', 'dotado', 'roludas', 'roludos', 'roluda', 'roludo', 'rola', 'piroc√£o', 'pirocao', 'pirocudo', 'pirocas', 'piroca', 'neguinhos', 'negrinhos', 'negrinhas', 'neguinha', 'neguinha', 'neguinho', 'nego', 'chifruda', 'chifrudo', 'corninha', 'corninho', 'benga', 'pauzuda', 'pauzudo', 'rodinhas', 'cuzinhos', 'gayzinhos', 'viadinhos', 'putinhas', 'ovinhos', 'ovinho', 'ov√£o', 'ovao', 'ovos', 'ovo', 'rodinha', 'boguinha', 'boga', '√¢nus', 'anus', 'lambido', 'lambi', 'lamber', 'lambe', 'vara', 'negrinha', 'negrinho', 'negra', 'negro', 'peitao', 'peit√£o', 'peitinho', 'peito', 'peitos', 'chupar', 'chupa', 'viad', 'viadao', 'viad√£o', 'viadinho', 'mamaco', 'macaquinho', 'lingui√ßa', 'toba', 'pau no c√∫', 'pau no cu', 'arrombada', 'arrombado', 'piranha', 'gayzinho', 'vadiazinha', 'putinha', 'puta', 'gay', 'travesti', 'traveco', 'bicha', 'bixa', 'macaca', 'macaco', 'vagabunda', 'bilau', 'pal', 'pau', 'chibiu', 'xibiu', 'perereca', 'chota', 'xota', 'vagina', 'buceta', 'p√™nis', 'penis', 'incesto', 'porno', 'porn√¥', 'viadinha', 'cuzinho', 'vadio', 'vadia', 'bobo', 'bobos', 'trouxa', 'trouxas', 'babaca', 'babacas', 'ot√°rio', 'otaria', 'ot√°rios', 'otarias', 'boc√≥', 'boc√≥s', 'burro', 'burra', 'burros', 'burras', 'imbecil', 'imbecis', 'corno', 'corna', 'cornos', 'cornas', 'vagabundo', 'vagabunda', 'vagabundos', 'vagabundas', 'merda', 'merdas', 'porra', 'porras', 'caralho', 'caralhos', 'filho da puta', 'filha da puta', 'filhos da puta', 'filhas da puta', 'puta', 'putas', 'putaria', 'puto', 'puta que pariu', 'vai tomar no cu', 'vai se foder', 'vai se ferrar', 'vai se lascar', 'se fode', 'se foda', 'se ferra', 'se lasca', 'se ferrou', 'foda-se', 'fodase', 'fodam-se', 'fodido', 'fodida', 'fodidos', 'fodidas', 'fdp', 'pnc', 'vsf', 'vtnc', 'escroto', 'escrota', 'escrotos', 'escrotas', 'cuz√£o', 'cuzona', 'cuz√µes', 'cuzao', 'cuzona', 'cu', 'cuzao', 'pau no cu', 'pau no seu cu', 'pau no c√∫', 'no cu', 'no c√∫', 'viado', 'veado', 'veados', 'viados', 'boiola', 'boiolas', 'bicha', 'bichas', 'gayzinho', 'lesbica', 'l√©sbica', 'mongol', 'mongoloide', 'retardado', 'retardada', 'retardados', 'retardadas', 'deficiente', 'aleijado', 'aleijada', 'aleijados', 'aleijadas', 'doente', 'doentes', 'nojento', 'nojenta', 'nojentos', 'nojentas', 'maldito', 'maldita', 'desgra√ßado', 'desgra√ßada', 'desgra√ßados', 'desgra√ßadas', 'maluco', 'maluca', 'malucos', 'malucas', 'traste', 'lixo', 'lixos', 'fracassado', 'fracassada', 'fracassados', 'fracassadas', 'z√© ruela', 'z√© buceta', 'z√©', 'cracudo', 'cracuda', 'cracudos', 'cracudas', 'maconheiro', 'maconheira', 'maconheiros', 'maconheiras', 'demente', 'tapado', 'tapada', 'jumento', 'jumenta', 'anta', 'jegue', 'burro pra caralho', 'burra pra caralho'];
const chatNameInput = document.getElementById('chat-name');
const enterChatBtn = document.getElementById('enter-chat-btn');
const nameGroup = document.getElementById('name-group');
const chatForm = document.getElementById('chat-form');
const chatMessageInput = document.getElementById('chat-message');
const messageGroup = document.getElementById('message-group');
const chatMessages = document.getElementById('chat-messages');
const chatSubmitButton = messageGroup.querySelector('button');
const chatPlaceholder = document.getElementById('chat-placeholder');

// Refer√™ncias para novas funcionalidades
const pmIndicator = document.getElementById('private-message-indicator');
const pmInfo = document.getElementById('pm-info');
const exitPmBtn = document.getElementById('exit-pm-btn');
const suggestionsBox = document.getElementById('mention-suggestions');

// Refer√™ncias do Firebase
const publicMessagesRef = database.ref('chatMessages');
const privateMessagesRef = database.ref('privateMessages');
const participantsRef = database.ref('participants');

// Vari√°veis de estado
let chatParticipants = new Set();
let currentUser = '';
let privateRecipient = null;
const userColors = {};

function getRandomColor() {
    const hue = Math.floor(Math.random() * 360);
    return `hsl(${hue}, 90%, 70%)`;
}

function escapeHTML(str) {
    const p = document.createElement('p');
    p.textContent = str;
    return p.innerHTML;
}

function displaySystemMessage(text) {
    const messageElement = document.createElement('div');
    messageElement.className = 'chat-system-message';
    messageElement.textContent = text;
    chatMessages.appendChild(messageElement);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}
        // DEPOIS (SUBSTITUA PELA VERS√ÉO ABAIXO)
function contemPalavraImpropria(texto) {
    if (palavrasImproprias.length === 0) return false;

    // Converte o texto do usu√°rio para min√∫sculas e divide em "palavras"
    // Isso lida com espa√ßos e pontua√ß√µes de forma mais eficaz
    const palavrasDoTexto = texto.toLowerCase().split(/[\s,\.;:\-_!?()]+/);

    // Verifica se ALGUMA das palavras do texto est√° na lista de palavras impr√≥prias
    return palavrasDoTexto.some(palavra => palavrasImproprias.includes(palavra));
}

function activateChat(name) {
    currentUser = name;
    chatNameInput.value = name;
    nameGroup.classList.add('hidden');

    const chatPlaceholder = document.getElementById('chat-placeholder');
    if (chatPlaceholder) {
        chatPlaceholder.classList.add('hidden');
    }

    messageGroup.classList.remove('hidden');
    chatMessageInput.disabled = false;
    chatSubmitButton.disabled = false;
    chatMessageInput.focus();

    const participantRef = participantsRef.child(name);
    participantRef.set(true);
    participantRef.onDisconnect().remove();

    listenForPrivateMessages(currentUser);
}

// L√≥gica de Entrada no Chat
const savedName = localStorage.getItem('dbdChatName');
if (savedName) {
    // Se j√° tem nome, entra direto e J√Å DEIXA o placeholder escondido
    if (chatPlaceholder) chatPlaceholder.classList.add('hidden');
    activateChat(savedName);
} else {
    // Se √© novo, o placeholder come√ßa vis√≠vel (removendo a classe 'hidden')
    if (chatPlaceholder) chatPlaceholder.classList.remove('hidden');
}

enterChatBtn.addEventListener('click', () => {
    const name = chatNameInput.value.trim();
    if (contemPalavraImpropria(name)) {
        alert('Este nome de usu√°rio n√£o √© permitido. Por favor, escolha outro.');
        return;
    }
    if (name.length > MAX_USERNAME_LENGTH) {
        alert(`O nome de usu√°rio √© muito longo! O limite √© de ${MAX_USERNAME_LENGTH} caracteres.`);
        return;
    }
    if (name) {
        if (chatParticipants.has(name)) {
            alert(`O nome "${name}" j√° est√° em uso.`);
            return;
        }
        localStorage.setItem('dbdChatName', name);
        activateChat(name);
    }
});

participantsRef.on('child_added', snapshot => chatParticipants.add(snapshot.key));
participantsRef.on('child_removed', snapshot => chatParticipants.delete(snapshot.key));

// L√≥gica de Envio de Mensagem (com tratamento de comandos)
chatForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const message = chatMessageInput.value.trim();
    if (!currentUser || !message) return;

    if (contemPalavraImpropria(message)) {
        alert('Sua mensagem cont√©m termos n√£o permitidos e n√£o ser√° enviada.');
        chatMessageInput.value = ''; // Limpa o campo
        return;
    }
    if (message.length > MAX_MESSAGE_LENGTH) {
        alert(`Sua mensagem √© muito longa! O limite √© de ${MAX_MESSAGE_LENGTH} caracteres.`);
        return; // Impede o envio da mensagem
    }

    if (message.startsWith('/')) {
        handleCommand(message);
        chatMessageInput.value = '';
        return;
    }

    if (privateRecipient) {
        const conversationId = [currentUser, privateRecipient].sort().join('_');
        privateMessagesRef.child(conversationId).push({
            from: currentUser, to: privateRecipient, message,
            timestamp: firebase.database.ServerValue.TIMESTAMP
        });
    } else {
        publicMessagesRef.push({
            name: currentUser, message,
            timestamp: firebase.database.ServerValue.TIMESTAMP,
            watchingStream: isLiveNow ? currentStreamKey : 'offline'
        });
    }
    chatMessageInput.value = '';
});

// --- FUN√á√ÉO PARA PROCESSAR COMANDOS ---
function handleCommand(message) {
    const parts = message.split(' ');
    const command = parts[0];
    const args = parts.slice(1);

    if (command === '/limparagora') {
        if (confirm('Tem certeza que deseja apagar TODAS as mensagens do chat p√∫blico?')) {
            publicMessagesRef.remove();
        }
    } else if (command === '/nome') {
        const newName = args.join(' ').trim();
        const oldName = currentUser;

        if (!newName) {
            displaySystemMessage('Uso: /nome <seu_novo_nome>');
        } else if (chatParticipants.has(newName)) {
            displaySystemMessage(`O nome "${newName}" j√° est√° em uso.`);
        } else {
            participantsRef.child(oldName).remove();
            const newParticipantRef = participantsRef.child(newName);
            newParticipantRef.set(true);
            newParticipantRef.onDisconnect().remove();

            currentUser = newName;
            localStorage.setItem('dbdChatName', newName);

            displaySystemMessage(`Seu nome foi alterado de "${oldName}" para "${newName}"`);
        }
    } else {
        displaySystemMessage(`Comando "${command}" n√£o reconhecido.`);
    }
}

// L√≥gica para RENDERIZAR mensagens p√∫blicas
publicMessagesRef.limitToLast(100).on('child_added', (snapshot) => {
    const msg = snapshot.val();
    if (!msg || !msg.name || !msg.message || msg.to) return;
    displayPublicMessage(msg);
});

function displayPublicMessage(msg) {
    const messageElement = document.createElement('div');
    messageElement.classList.add('chat-message');

    if (msg.watchingStream) {
        const streamIndicator = document.createElement('span');
        streamIndicator.className = 'watching-indicator';
        streamIndicator.textContent = msg.watchingStream === 'offline' ? 'Sem live ativa' : `Na tela ${msg.watchingStream.slice(-1)}`;
        messageElement.appendChild(streamIndicator);
    }

    if (!userColors[msg.name]) userColors[msg.name] = getRandomColor();
    const nameSpan = document.createElement('span');
    nameSpan.className = 'name';
    nameSpan.textContent = msg.name + ':';
    nameSpan.style.color = userColors[msg.name];
    nameSpan.dataset.username = msg.name;
    messageElement.appendChild(nameSpan);

    const messageSpan = document.createElement('span');
    messageSpan.className = 'text';
    messageSpan.innerHTML = escapeHTML(msg.message).replace(/@([\w√Ä-√∫]+)/g, '<span class="mention">@$1</span>');
    messageElement.appendChild(messageSpan);

    chatMessages.appendChild(messageElement);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// L√≥gica para RENDERIZAR mensagens privadas
function displayPrivateMessage(msg) {
    const isSender = msg.from === currentUser;
    const otherPerson = isSender ? msg.to : msg.from;
    const messageElement = document.createElement('div');
    messageElement.classList.add('chat-message', 'private-message');
    const header = document.createElement('div');
    header.className = 'pm-header';
    header.textContent = isSender ? `Sussurro para ${otherPerson}:` : `Sussurro de ${otherPerson}:`;
    messageElement.appendChild(header);
    const messageSpan = document.createElement('span');
    messageSpan.className = 'text';
    messageSpan.textContent = msg.message;
    messageElement.appendChild(messageSpan);
    chatMessages.appendChild(messageElement);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// L√≥gica para "ESCUTAR" por mensagens privadas
function listenForPrivateMessages(username) {
    const conversationIds = new Set();
    const setupListener = (otherUser) => {
        if (otherUser === username) return;
        const conversationId = [username, otherUser].sort().join('_');
        if (conversationIds.has(conversationId)) return;
        conversationIds.add(conversationId);
        privateMessagesRef.child(conversationId).on('child_added', (msgSnapshot) => {
            const msg = msgSnapshot.val();
            if (msg && (msg.to === username || msg.from === username)) {
                displayPrivateMessage(msg);
            }
        });
    };
    participantsRef.on('child_added', (snapshot) => setupListener(snapshot.key));
}

// L√≥gica do MENU DE CONTEXTO e SUGEST√ïES DE MEN√á√ÉO
document.body.addEventListener('click', (e) => {
    const existingMenu = document.querySelector('.context-menu');
    if (existingMenu) existingMenu.remove();
    hideSuggestions();

    if (e.target.classList.contains('name')) {
        const username = e.target.dataset.username;
        if (username && username !== currentUser) {
            e.preventDefault();
            createContextMenu(username, e.pageX, e.pageY);
        }
    }
});

function createContextMenu(username, x, y) {
    const menu = document.createElement('div');
    menu.className = 'context-menu';
    menu.style.left = `${x}px`;
    menu.style.top = `${y}px`;
    const pmItem = document.createElement('div');
    pmItem.className = 'context-menu-item';
    pmItem.textContent = `Mensagem Privada`;
    pmItem.onclick = () => { enterPrivateMode(username); menu.remove(); };
    menu.appendChild(pmItem);
    document.body.appendChild(menu);
}

// Fun√ß√µes para GERENCIAR o modo de conversa
function enterPrivateMode(username) {
    privateRecipient = username;
    pmInfo.textContent = `Sussurrando para ${username}...`;
    pmIndicator.classList.remove('hidden');
    chatMessageInput.placeholder = `Mensagem privada para ${username}...`;
    chatMessageInput.focus();
}

function exitPrivateMode() {
    privateRecipient = null;
    pmIndicator.classList.add('hidden');
    chatMessageInput.placeholder = 'Digite sua mensagem...';
    chatMessageInput.focus();
}
exitPmBtn.addEventListener('click', exitPrivateMode);

// --- L√ìGICA DAS SUGEST√ïES DE MEN√á√ÉO (CORRIGIDA) ---
chatMessageInput.addEventListener('input', () => {
    const text = chatMessageInput.value;
    const cursorPos = chatMessageInput.selectionStart;

    // Verifica se o cursor est√° logo ap√≥s um @
    if (text.substring(cursorPos - 1, cursorPos) === '@' && (text.length === 1 || text.substring(cursorPos - 2, cursorPos - 1) === ' ')) {
        const suggestions = [...chatParticipants].filter(name => name !== currentUser);
        if (suggestions.length > 0) showSuggestions(suggestions, cursorPos - 1);
        else hideSuggestions();
        return;
    }

    // L√≥gica para filtrar nomes
    const textBeforeCursor = text.substring(0, cursorPos);
    const lastAtIndex = textBeforeCursor.lastIndexOf('@');
    const lastSpaceIndex = textBeforeCursor.lastIndexOf(' ');

    if (lastAtIndex > lastSpaceIndex) {
        const searchTerm = textBeforeCursor.substring(lastAtIndex + 1).toLowerCase();
        const suggestions = [...chatParticipants].filter(name =>
            name.toLowerCase().startsWith(searchTerm) && name !== currentUser
        );
        if (suggestions.length > 0) showSuggestions(suggestions, lastAtIndex);
        else hideSuggestions();
    } else {
        hideSuggestions();
    }
});

function showSuggestions(suggestions, atIndex) {
    suggestionsBox.innerHTML = '';
    suggestions.forEach(name => {
        const item = document.createElement('div');
        item.className = 'suggestion-item';
        item.textContent = name;
        item.addEventListener('mousedown', (e) => {
            e.preventDefault();
            const text = chatMessageInput.value;
            const before = text.substring(0, atIndex);
            const after = text.substring(chatMessageInput.selectionStart);
            chatMessageInput.value = `${before}@${name} ${after}`;
            hideSuggestions();
            chatMessageInput.focus();
        });
        suggestionsBox.appendChild(item);
    });
    suggestionsBox.classList.remove('hidden');
}

function hideSuggestions() {
    if (!suggestionsBox.classList.contains('hidden')) {
        suggestionsBox.classList.add('hidden');
    }
}

// Limpeza geral do chat p√∫blico
publicMessagesRef.on('value', (snapshot) => {
    if (!snapshot.exists() && chatMessages) {
        chatMessages.innerHTML = ''; // Limpa completamente o chat
        const name = localStorage.getItem('dbdChatName');

        // S√ì recria o placeholder se o usu√°rio N√ÉO tiver um nome salvo
        if (!name) { 
            const placeholder = document.createElement('div');
            placeholder.id = 'chat-placeholder';
            placeholder.innerHTML = `<div class="placeholder-icon">üí¨</div>
                <h4>Bem-vindo ao Chat da Entidade</h4>
                <p>Use <code>/nome SEUNOME</code> para mudar o nome de usu√°rio. Ex: /nome Chris.</p>
                <p>Clique sobre o nome de um usu√°rio para enviar uma DM.</p>
                <p>Digite <code>@</code> para mencionar algu√©m.</p>`;
            chatMessages.appendChild(placeholder);
        }
    }
});
// --- FIM: L√ìGICA DO CHAT AO VIVO ---


        // (O resto do seu c√≥digo JS continua aqui, sem altera√ß√µes)
        const visitorCountElement = document.getElementById('visitor-count');
        const presenceRef = database.ref('presence');
        const mySessionRef = presenceRef.push();
        mySessionRef.onDisconnect().remove();
        mySessionRef.set(true);
        presenceRef.on('value', (snapshot) => {
            const count = snapshot.numChildren();
            if (visitorCountElement) {
                visitorCountElement.textContent = count;
            }
        });
        const countdownDate = new Date("2025-10-31T20:00:00").getTime();
        const countdownContainer = document.getElementById('countdown-container');
        const timerElement = document.getElementById('timer');
        const liveMessageElement = document.getElementById('live-message');
        const countdownTitle = countdownContainer.querySelector('.countdown-title');
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const countdownInterval = setInterval(function() {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            if (distance < 0) {
                clearInterval(countdownInterval);
                timerElement.classList.add('hidden');
                countdownTitle.classList.add('hidden');
                liveMessageElement.classList.remove('hidden');
                return;
            }
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            daysEl.textContent = days < 10 ? '0' + days : days;
            hoursEl.textContent = hours < 10 ? '0' + hours : hours;
            minutesEl.textContent = minutes < 10 ? '0' + minutes : minutes;
            secondsEl.textContent = seconds < 10 ? '0' + seconds : seconds;
        }, 1000);
        const offlineOverlay = document.getElementById('offline-overlay');
        const liveIndicator = document.getElementById('live-indicator-wrapper');
        const unmutePopup = document.getElementById('dbd-unmute-popup');
        const unmuteYesBtn = document.getElementById('unmute-yes-btn');
        const unmuteNoBtn = document.getElementById('unmute-no-btn');
        let popupShown = false;
        window.onPlayerStateChange = function(event) {
    if (event.data === YT.PlayerState.PLAYING) { // Removi o !popupShown para o bot√£o sempre aparecer
        offlineOverlay.classList.add('hidden');
        liveIndicator.classList.remove('hidden');
        document.getElementById('video-loader').classList.add('hidden'); // Esconde a anima√ß√£o
        fullscreenBtn.classList.remove('hidden'); // LINHA ADICIONADA AQUI

        if (!popupShown) { // Movi o popup para uma verifica√ß√£o separada
            unmutePopup.classList.add('show');
            popupShown = true;
        }
    } else {
        // Esconde nosso bot√£o de tela cheia se o v√≠deo n√£o estiver tocando
        fullscreenBtn.classList.add('hidden');
    }
}
        unmuteYesBtn.addEventListener('click', (event) => {
            event.preventDefault();
            unmutePopup.classList.remove('show');
            if (player && typeof player.unMute === 'function') {
                player.unMute();
            }
        });
        unmuteNoBtn.addEventListener('click', (event) => {
            event.preventDefault();
            unmutePopup.classList.remove('show');
        });
        const feedbackOverlay = document.getElementById('feedback-popup-overlay');
        const openFeedbackBtn = document.getElementById('open-feedback-btn');
        const closeFeedbackBtn = document.getElementById('close-feedback-btn');
        const feedbackForm = document.getElementById('feedback-form');
        const formContent = document.getElementById('feedback-form-content');
        const successContent = document.getElementById('feedback-success-content');
        openFeedbackBtn.addEventListener('click', () => feedbackOverlay.classList.add('active'));
        if(closeFeedbackBtn) {
            closeFeedbackBtn.addEventListener('click', () => {
                feedbackOverlay.classList.remove('active');
                setTimeout(() => {
                    formContent.classList.remove('hidden');
                    successContent.classList.add('hidden');
                }, 400);
            });
        }
        feedbackForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(feedbackForm);
            const submitBtn = feedbackForm.querySelector('.submit-feedback');
            submitBtn.textContent = 'Enviando...';
            submitBtn.disabled = true;
            fetch(feedbackForm.action, {
                method: 'POST', body: formData, headers: { 'Accept': 'application/json' }
            }).then(response => {
                if (response.ok) {
                    formContent.classList.add('hidden');
                    successContent.classList.remove('hidden');
                } else {
                    alert('Houve um erro ao enviar seu feedback. Tente novamente.');
                    submitBtn.textContent = 'Enviar Feedback';
                    submitBtn.disabled = false;
                }
            }).catch(error => {
                alert('Houve um erro de conex√£o. Tente novamente.');
                submitBtn.textContent = 'Enviar Feedback';
                submitBtn.disabled = false;
            });
        });
        // SUBSTITUA TODO O BLOCO DO PLACAR POR ESTE C√ìDIGO CORRIGIDO
const scoreboardFab = document.getElementById('scoreboard-fab');
const scoreboardOverlay = document.getElementById('scoreboard-overlay');
const closeScoreboardBtn = document.getElementById('close-scoreboard-btn');

// üîß CORRIGIDO: Refer√™ncias aos elementos corretos do HTML
const teamsList = document.getElementById('teams-leaderboard'); 
const timestampElement = document.getElementById('last-updated-timestamp');

scoreboardFab.addEventListener('click', () => scoreboardOverlay.classList.add('active'));
closeScoreboardBtn.addEventListener('click', () => scoreboardOverlay.classList.remove('active'));

// ‚ú® ATUALIZADO: Fun√ß√£o completa que atualiza a lista E o carimbo de data/hora
function updateLeaderboard(snapshot, listElement, timestampEl) {
    const data = snapshot.val();
    listElement.innerHTML = '<li>Carregando...</li>';

    if (data) {
        const now = new Date();
        const pad = (num) => num.toString().padStart(2, '0');
        const formattedDate = `${pad(now.getDate())}/${pad(now.getMonth() + 1)}/${now.getFullYear()}`;
        const formattedTime = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
        timestampEl.textContent = `√öltima atualiza√ß√£o: ${formattedDate} √†s ${formattedTime}`;
    } else {
        timestampEl.textContent = 'Ainda n√£o h√° dados no placar.';
    }

    if (data) {
        listElement.innerHTML = '';
        const entries = Object.keys(data).map(key => ({ id: key, ...data[key] }));
        
        const sortedEntries = entries.sort((a, b) => b.score - a.score);
        
        if (sortedEntries.length === 0) {
            listElement.innerHTML = '<li>Nenhuma equipe registrada ainda.</li>';
        } else {
            sortedEntries.forEach((entry, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${index + 1}. <span class="name">${entry.name}</span></span><span class="score">${entry.score} pts</span>`;
                listElement.appendChild(li);
            });
        }
    } else {
        listElement.innerHTML = '<li>Nenhuma equipe registrada ainda.</li>';
    }
}

// üîß CORRIGIDO: Listener que chama a fun√ß√£o com os par√¢metros corretos
const teamsRef = database.ref('teams');
teamsRef.on('value', (snapshot) => {
    updateLeaderboard(snapshot, teamsList, timestampElement);
});
// ADICIONE ESTE NOVO BLOCO
fullscreenBtn.addEventListener('click', () => {
    // Verifica se J√Å existe um elemento em tela cheia no documento
    const isFullscreen = document.fullscreenElement || document.webkitFullscreenElement;

    // SE N√ÉO ESTIVER em tela cheia...
    if (!isFullscreen) {
        // ...ent√£o, entra em tela cheia.
        if (videoContainer.requestFullscreen) {
            videoContainer.requestFullscreen().then(() => { screen.orientation.lock('landscape'); });
        } else if (videoContainer.webkitRequestFullscreen) { /* Safari */
            videoContainer.webkitRequestFullscreen();
        } else if (videoContainer.msRequestFullscreen) { /* IE11 */
            videoContainer.msRequestFullscreen();
        }
    } 
    // SE J√Å ESTIVER em tela cheia...
    else {
        // ...ent√£o, sai da tela cheia.
        if (document.exitFullscreen) {
            document.exitFullscreen().then(() => { screen.orientation.unlock(); });
        } else if (document.webkitExitFullscreen) { /* Safari */
            document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) { /* IE11 */
            document.msExitFullscreen();
        }
    }
});
        });
        document.addEventListener('DOMContentLoaded', function() {
    const openFeedbackBtnHeader = document.getElementById('open-feedback-btn');
    const openFeedbackBtnFooter = document.getElementById('open-feedback-btn-footer');
    const feedbackOverlay = document.getElementById('feedback-popup-overlay');

    if (openFeedbackBtnFooter && feedbackOverlay) {
        openFeedbackBtnFooter.addEventListener('click', () => feedbackOverlay.classList.add('active'));
    }
});
</script>
        <div id="grimorio-container">
    <a href="niveis.html" id="grimorio-killers" class="grimorio-item grimorio-visible">
        <img src="https://i.imgur.com/KhwS5jZ.gif" alt="Grim√≥rio dos Killers">
        <span>Grim√≥rio dos Killers</span>
    </a>
    <a href="recompensas.html" id="grimorio-recompensas" class="grimorio-item grimorio-hidden">
        <img src="https://i.imgur.com/p53OZAS.gif" alt="Livro das Recompensas">
        <span>Livro dos Rewards</span>
    </a>
</div>
    <div id="registration-closed-popup" class="popup-overlay align-top">
    <div class="feedback-popup">
        <button class="close-btn">√ó</button>
        <div class="feedback-success" style="display: block;">
            <img src="https://i.imgur.com/HGt7kAz.png" alt="Inscri√ß√µes Fechadas" style="height: 150px; margin-bottom: 15px;">
            <h3 style="font-family: 'Creepster', cursive; font-size: 2.5rem;">Inscri√ß√µes Fechadas</h3>
            <p>A Entidade n√£o est√° aceitando novos desafiantes no momento. Volte quando os port√µes de sa√≠da forem energizados!</p>
        </div>
    </div>
</div>
    <footer>
    <div class="footer-content">
        <div class="footer-logo">
            <img src="https://i.imgur.com/ElV8c5i.png" alt="√çcone da Entidade">
        </div>
        
        <p class="footer-copyright">¬© 2025 Torneio da Entidade. Todos os direitos reservados.</p>
        
        <nav class="footer-links">
            <a href="admin.html" target="_blank">Administrador</a>
            <a href="resultados.html" target="_blank">Sorteios</a>
            <a href="niveis.html" target="_blank">Grim√≥rio</a>
        </nav>
    </div>
</footer>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const grimorioKillers = document.getElementById('grimorio-killers');
    const grimorioRecompensas = document.getElementById('grimorio-recompensas');

    // Se os elementos existirem na p√°gina
    if (grimorioKillers && grimorioRecompensas) {
        // A cada 10 segundos (10000 milissegundos)
        setInterval(() => {
            // Alterna as classes de visibilidade dos dois livros
            grimorioKillers.classList.toggle('grimorio-visible');
            grimorioKillers.classList.toggle('grimorio-hidden');

            grimorioRecompensas.classList.toggle('grimorio-visible');
            grimorioRecompensas.classList.toggle('grimorio-hidden');
        }, 10000); // 10000ms = 10 segundos
    }
});
        // --- IN√çCIO: L√ìGICA PARA ATIVAR/DESATIVAR INSCRI√á√ïES ---

// Seleciona os elementos que vamos usar
const signupBtn = document.getElementById('signup-btn');
const registrationPopup = document.getElementById('registration-closed-popup');
const closeRegistrationPopupBtn = registrationPopup.querySelector('.close-btn');

// Refer√™ncia no seu Firebase para o controle de inscri√ß√µes
// Voc√™ precisar√° criar isso no seu painel!
const registrationsRef = database.ref('config/registrationsOpen');

// Fica "ouvindo" qualquer mudan√ßa no valor de 'registrationsOpen' no Firebase
registrationsRef.on('value', (snapshot) => {
    const areOpen = snapshot.val(); // Pega o valor (true ou false)

    if (areOpen === true) {
        // Se as inscri√ß√µes estiverem ABERTAS
        signupBtn.classList.remove('disabled');
        signupBtn.href = 'inscricao.html'; // Garante que o link funcione
        signupBtn.setAttribute('title', 'Clique para se inscrever!');
    } else {
        // Se as inscri√ß√µes estiverem FECHADAS (ou n√£o existir a chave)
        signupBtn.classList.add('disabled');
        signupBtn.href = '#'; // Remove o link para evitar navega√ß√£o
        signupBtn.setAttribute('title', 'As inscri√ß√µes est√£o fechadas no momento.');
    }
});

// Adiciona o evento de clique ao bot√£o de inscri√ß√£o
signupBtn.addEventListener('click', (event) => {
    // Verifica se o bot√£o tem a classe 'disabled'
    if (signupBtn.classList.contains('disabled')) {
        event.preventDefault(); // Previne qualquer a√ß√£o padr√£o do link
        registrationPopup.classList.add('active'); // Mostra o pop-up de aviso
    }
});

// Fun√ß√£o para fechar o pop-up
function closePopup() {
    registrationPopup.classList.remove('active');
}

// Adiciona eventos para fechar o pop-up
closeRegistrationPopupBtn.addEventListener('click', closePopup);
registrationPopup.addEventListener('click', (event) => {
    // Fecha se o clique for no fundo escuro (overlay) e n√£o no conte√∫do
    if (event.target === registrationPopup) {
        closePopup();
    }
});

// --- FIM: L√ìGICA PARA ATIVAR/DESATIVAR INSCRI√á√ïES ---
</script>
</body>
</html>
